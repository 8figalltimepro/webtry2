{"version":3,"sources":["components/Arrow.js","components/InputBox.js","hooks/useMovie.js","components/Title.js","components/Card.js","components/MovieRow.js","components/Progress.js","lib/lookMovie.js","views/Search.js","views/NotFound.js","components/VideoElement.js","views/Movie.js","App.js","index.js"],"names":["Arrow","props","className","xmlns","width","height","viewBox","fill","stroke","stroke-width","stroke-linecap","stroke-linejoin","class","left","x1","y1","x2","y2","points","InputBox","onSubmit","placeholder","React","useState","value","setValue","e","preventDefault","type","id","onChange","target","MovieContext","createContext","MovieProvider","page","setPage","stream","setStream","title","episode","season","streamData","setStreamData","Provider","navigate","str","setStreamUrl","streamUrl","d","p","children","useMovie","useContext","Title","size","accentLink","accent","length","onClick","Card","showing","setShowing","measureRef","useRef","setHeight","useEffect","current","show","clientHeight","style","doTransition","fullWidth","ref","MovieRow","Progress","failed","text","progress","steps","toFixed","getCorsUrl","url","getVideoUrl","config","a","getAccessToken","accessToken","now","Math","floor","Date","movieId","fetch","then","json","videoOpts","videoUrl","res","includes","startsWith","data","token","getStreamUrl","slug","pageReq","JSON5","parse","slice","indexOf","split","trim","id_movie","findMovie","searchTerm","searchUrl","encodeURIComponent","searchRes","results","result","map","v","fuse","Fuse","threshold","distance","keys","matchedResults","search","toString","item","options","forEach","r","push","SearchView","setOptions","setProgress","setText","setFailed","showingOptions","setShowingOptions","fail","getStream","query","searchMovie","i","NotFound","VideoElement","videoRef","hls","Hls","isSupported","canPlayType","attachMedia","loadSource","src","controls","autoPlay","MovieView","Router","App","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.0fea8d58.chunk.js","sourcesContent":["import React from 'react'\nimport './Arrow.css'\n\n// left?: boolean\nexport function Arrow(props) {\n    return (\n        <div className=\"arrow\">\n            <svg xmlns=\"http://www.w3.org/2000/svg\" width=\"1rem\" height=\"1rem\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" stroke-width=\"2\" stroke-linecap=\"round\" stroke-linejoin=\"round\" class={`feather ${props.left?'left':''}`}>\n                <line x1=\"5\" y1=\"12\" x2=\"19\" y2=\"12\"></line>\n                <polyline points=\"12 5 19 12 12 19\"></polyline>\n            </svg>\n        </div>\n    )\n}\n","import React from 'react';\nimport { Arrow } from './Arrow';\nimport './InputBox.css'\n\n// props = { onSubmit: (str) => {}, placeholder: string}\nexport function InputBox({ onSubmit, placeholder }) {\n    const [value, setValue] = React.useState(\"\");\n\n    return (\n        <form className=\"inputBar\" onSubmit={(e) => {\n            e.preventDefault();\n            onSubmit(value)\n            return false;\n        }}>\n            <input\n                type='text'\n                className=\"inputTextBox\"\n                id=\"inputTextBox\"\n                placeholder={placeholder}\n                value={value}\n                onChange={(e) => setValue(e.target.value)}\n            />\n            <button className=\"inputSearchButton\"><span className=\"text\">Search<span className=\"arrow\"><Arrow/></span></span></button>\n        </form>\n    )\n}\n","import React from 'react'\nconst MovieContext = React.createContext(null)\n\nexport function MovieProvider(props) {\n    const [page, setPage] = React.useState(\"search\");\n    const [stream, setStream] = React.useState(\"\");\n    const [streamData, setStreamData] = React.useState({ title: \"\", type: \"\", episode: \"\", season: \"\" })\n\n    return (\n        <MovieContext.Provider value={{\n            navigate(str) {\n                setPage(str)\n            },\n            page,\n            setStreamUrl: setStream,\n            streamUrl: stream,\n            streamData,\n            setStreamData(d) {\n                setStreamData(p => ({...p,...d}))\n            },\n        }}>\n            {props.children}\n        </MovieContext.Provider>\n    )\n}\n\nexport function useMovie(props) {\n    return React.useContext(MovieContext);\n}\n","import React from 'react';\nimport { useMovie } from '../hooks/useMovie'\nimport { Arrow } from '../components/Arrow'\nimport './Title.css'\n\n// size: \"big\" | \"medium\" | \"small\" | null\n// accent: string | null\n// accentLink: string | null\nexport function Title(props) {\n    const { navigate } = useMovie();\n    const size = props.size || \"big\";\n\n    const accentLink = props.accentLink || \"\";\n    const accent = props.accent || \"\";\n    return (\n        <div>\n            {accent.length > 0 ? (\n                <p onClick={ () => accentLink.length > 0 && navigate(accentLink)} className={`title-accent ${accentLink.length > 0 ? 'title-accent-link' : ''}`}>\n                    {accentLink.length > 0 ? (<Arrow left/>) : null}{accent}\n                </p>\n            ) : null}\n            <h1 className={\"title \" + ( size ? 'title-size-' + size : '' )}>{props.children}</h1>\n        </div>\n    )\n}\n","import React from 'react'\nimport './Card.css'\n\n// fullWidth: boolean\n// show: boolean\n// doTransition: boolean\nexport function Card(props) {\n\n    const [showing, setShowing] = React.useState(false);\n    const measureRef = React.useRef(null)\n    const [height, setHeight] = React.useState(0);\n\n    React.useEffect(() => {\n        if (!measureRef?.current) return;\n        setShowing(props.show);\n        setHeight(measureRef.current.clientHeight)\n    }, [props.show, measureRef])\n\n    return (\n        <div className=\"card-wrapper\" style={{\n            height: props.doTransition ? (showing ? height : 0) : \"initial\",\n        }}>\n            <div className={`card ${ props.fullWidth ? 'full' : '' } ${ showing ? 'show' : '' } ${ props.doTransition ? 'doTransition' : '' }`} ref={measureRef}>\n                {props.children}\n            </div>\n        </div>\n    )\n}\n","import React from 'react'\nimport { Arrow } from './Arrow'\nimport './MovieRow.css'\n\n// title: string\n// onClick: () => void\nexport function MovieRow(props) {\n    return (\n        <div className=\"movieRow\" onClick={() => props.onClick && props.onClick()}>\n            <div className=\"left\">\n                {props.title}\n            </div>\n            <div className=\"watch\">\n                <p>Watch movie</p>\n                <Arrow/>\n            </div>\n        </div>\n    )\n}\n","import React from 'react'\nimport './Progress.css'\n\n// show: boolean\n// progress: number\n// steps: number\n// text: string\n// failed: boolean\nexport function Progress(props) {\n    return (\n        <div className={`progress ${props.show?'':'hide'} ${props.failed?'failed':''}`}>\n            { props.text && props.text.length > 0 ? (\n                <p>{props.text}</p>) : null}\n            <div className=\"bar\">\n                <div className=\"bar-inner\" style={{\n                    width: (props.progress / props.steps * 100).toFixed(0) + \"%\"\n                }}/>\n            </div>\n        </div>\n    )\n}","import Fuse from 'fuse.js'\nimport JSON5 from 'json5'\n\nfunction getCorsUrl(url) {\n    return `https://hidden-inlet-27205.herokuapp.com/${url}`;\n}\n\nasync function getVideoUrl(config) {\n    const accessToken = await getAccessToken(config);\n    const now = Math.floor(Date.now() / 1e3);\n\n    let url = getCorsUrl(`https://lookmovie.io/manifests/movies/json/${config.movieId}/${now}/${accessToken}/master.m3u8`);\n\n    if (url) {\n        const videoOpts = await fetch(url).then((d) => d.json());\n\n        // Find video URL and return it (with a check for a full url if needed)\n        const opts = [\"1080p\", \"1080\", \"720p\", \"720\", \"480p\", \"480\", \"auto\"]\n\n        let videoUrl = \"\";\n        for (let res of opts) {\n            if (videoOpts[res] && !videoOpts[res].includes('dummy') && !videoOpts[res].includes('earth-1984') && !videoUrl) {\n                videoUrl = videoOpts[res]\n            }\n        }\n\n        return videoUrl.startsWith(\"/\") ? getCorsUrl(`https://lookmovie.io/${videoUrl}`) : getCorsUrl(videoUrl);\n    }\n\n    return \"Invalid type.\";\n}\n\nasync function getAccessToken(config) {\n    let url = getCorsUrl(`https://lookmovie.io/api/v1/security/movie-access?id_movie=${config.movieId}&token=1&sk=&step=1`);\n\n    const data = await fetch(url).then((d) => d.json());\n\n    const token = data?.data?.accessToken;\n    if (token) return token;\n\n    return \"Invalid type provided in config\";\n}\n\nasync function getStreamUrl(slug, type) {\n    const url = getCorsUrl(`https://lookmovie.io/${type}s/view/${slug}`);\n    const pageReq = await fetch(url).then((d) => d.text());\n\n    const data = JSON5.parse(\"{\" +\n        pageReq\n            .slice(pageReq.indexOf(`${type}_storage`))\n            .split(\"};\")[0]\n            .split(\"= {\")[1]\n            .trim() +\n        \"}\"\n    );\n\n    const videoUrl = await getVideoUrl({\n        slug: slug,\n        movieId: data.id_movie,\n        type: \"movie\",\n    });\n\n    return { url: videoUrl }\n}\n\nasync function findMovie(searchTerm) {\n    const searchUrl = getCorsUrl(`https://lookmovie.io/api/v1/movies/search/?q=${encodeURIComponent(searchTerm)}`);\n    const searchRes = await fetch(searchUrl).then((d) => d.json());\n    let results = [...searchRes.result.map((v) => ({ ...v, type: \"movie\" }))];\n\n    const fuse = new Fuse(results, { threshold: 0.3, distance: 200, keys: [\"title\"] });\n    const matchedResults = fuse\n        .search(searchTerm.toString())\n        .map((result) => result.item);\n\n    if (matchedResults.length === 0) {\n        return { options: [] }\n    }\n\n    if (matchedResults.length > 1) {\n        const res = { options: [] };\n        \n        matchedResults.forEach((r) => res.options.push({\n            title: r.title,\n            slug: r.slug,\n            type: r.type\n        }));\n\n        return res;\n    } else {\n        const { title, slug, type } = matchedResults[0];\n        \n        return {\n            options: [{ title, slug, type }]\n        }\n    }\n}\n\nexport { findMovie, getStreamUrl };","import React from 'react';\nimport { InputBox } from '../components/InputBox'\nimport { Title } from '../components/Title'\nimport { Card } from '../components/Card'\nimport { MovieRow } from '../components/MovieRow'\nimport { Progress } from '../components/Progress'\nimport { findMovie, getStreamUrl } from '../lib/lookMovie'\nimport { useMovie } from '../hooks/useMovie';\n\nimport './Search.css'\n\nexport function SearchView() {\n    const { navigate, setStreamUrl, setStreamData } = useMovie();\n\n    const maxSteps = 3;\n    const [options, setOptions] = React.useState([]);\n    const [progress, setProgress] = React.useState(0);\n    const [text, setText] = React.useState(\"\");\n    const [failed, setFailed] = React.useState(false);\n    const [showingOptions, setShowingOptions] = React.useState(false);\n\n    const fail = (str) => {\n        setProgress(maxSteps);\n        setText(str)\n        setFailed(true)\n    }\n\n    async function getStream(title, slug, type) {\n        setStreamUrl(\"\");\n        try {\n            setProgress(2);\n            setText(`Getting stream for \"${title}\"`)\n            const { url } = await getStreamUrl(slug, type);\n            setProgress(maxSteps);\n            setStreamUrl(url);\n            setStreamData({\n                title,\n                type,\n            })\n            setText(`Streaming...`)\n            navigate(\"movie\")\n        } catch (err) {\n            fail(\"Failed to get stream\")\n        }\n    }\n\n    async function searchMovie(query) {\n        setFailed(false);\n        setText(`Searching for \"${query}\"`);\n        setProgress(1)\n        setShowingOptions(false)\n\n        try {\n            const { options } = await findMovie(query)\n\n            if (options.length === 0) {\n                return fail(\"Could not find that movie\")\n            } else if (options.length > 1) {\n                setProgress(2);\n                setText(\"Choose your movie\")\n                setOptions(options.map(v=>({ title: v.title, slug: v.slug, type: v.type })));\n                setShowingOptions(true)\n                return;\n            }\n\n            const { title, slug, type } = options[0];\n            getStream(title, slug, type);\n        } catch (err) {\n            fail(\"Failed to watch movie\")\n        }\n    }\n\n    return (\n        <div className=\"cardView\">\n            <Card>\n                <Title accent=\"Because watching movies legally is boring\">\n                    What movie do you wanna watch?\n                </Title>\n                <InputBox placeholder=\"Hamilton\" onSubmit={(str) => searchMovie(str)} />\n                <Progress show={progress > 0} failed={failed} progress={progress} steps={maxSteps} text={text} />\n            </Card>\n\n            <Card show={showingOptions} doTransition>\n                <Title size=\"medium\">\n                    Whoops, there are a few movies like that\n                </Title>\n                {options?.map((v, i) => (\n                    <MovieRow key={i} title={v.title} onClick={() => {\n                        setShowingOptions(false)\n                        getStream(v.title, v.slug, v.type)\n                    }}/>\n                ))}\n            </Card>\n        </div>\n    )\n}\n","import React from 'react'\nimport { Title } from '../components/Title'\nimport { Card } from '../components/Card'\n\nexport function NotFound(props) {\n    return (\n        <div className=\"cardView\">\n            <Card>\n                <Title accent=\"How did you end up here?\">\n                    Oopsie doopsie\n                </Title>\n            </Card>\n        </div>\n    )\n}\n","import React from 'react'\nimport Hls from 'hls.js'\nimport './VideoElement.css'\n\n// streamUrl: string\nexport function VideoElement({ streamUrl }) {\n    const videoRef = React.useRef(null);\n\n    React.useEffect(() => {\n        if (!videoRef || !videoRef.current) return;\n        \n        const hls = new Hls();\n        \n        if (!Hls.isSupported() && videoRef.current.canPlayType('application/vnd.apple.mpegurl')) {\n            videoRef.current.src = streamUrl;\n            return;\n        } else if (!Hls.isSupported()) {\n            return; // TODO show error\n        }\n        \n        hls.attachMedia(videoRef.current);\n        hls.loadSource(streamUrl);\n    }, [videoRef, streamUrl])\n\n    return (\n        <video className=\"videoElement\" ref={videoRef} controls autoPlay />\n    )\n}\n","import React from 'react'\nimport { Title } from '../components/Title'\nimport { Card } from '../components/Card'\nimport { useMovie } from '../hooks/useMovie'\nimport { VideoElement } from '../components/VideoElement'\n\nexport function MovieView(props) {\n    const { streamUrl, streamData } = useMovie();\n\n    return (\n        <div className=\"cardView\">\n            <Card fullWidth>\n                <Title accent=\"Return to home\" accentLink=\"search\">\n                    { streamData.title }\n                </Title>\n                <VideoElement streamUrl={streamUrl}/>\n            </Card>\n        </div>\n    )\n}\n","import './index.css';\nimport { SearchView } from './views/Search';\nimport { NotFound } from './views/NotFound';\nimport { MovieView } from './views/Movie';\nimport { useMovie, MovieProvider} from './hooks/useMovie';\n\nfunction Router() {\n  const { page } = useMovie();\n\n  if (page === \"search\") {\n    return <SearchView/>\n  }\n\n  if (page === \"movie\") {\n    return <MovieView/>\n  }\n\n  return (\n    <NotFound/>\n  )\n}\n\nfunction App() {\n  return (\n    <MovieProvider>\n      <Router/>\n    </MovieProvider>\n  );\n}\n\nexport default App;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n"],"sourceRoot":""}