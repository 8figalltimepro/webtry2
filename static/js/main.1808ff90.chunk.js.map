{"version":3,"sources":["components/Arrow.js","components/InputBox.js","hooks/useMovie.js","components/Title.js","components/Card.js","components/ErrorBanner.js","components/PercentageOverlay.js","components/MovieRow.js","components/Progress.js","lib/lookMovie.js","components/TypeSelector.js","views/Search.js","views/NotFound.js","components/VideoPlaceholder.js","components/VideoElement.js","components/NumberSelector.js","components/EpisodeSelector.js","views/Movie.js","App.js","index.js"],"names":["Arrow","props","className","dangerouslySetInnerHTML","__html","left","InputBox","onSubmit","placeholder","React","useState","searchTerm","setSearchTerm","e","preventDefault","type","id","value","onChange","target","required","MovieContext","createContext","MovieProvider","page","setPage","stream","setStream","title","slug","episodes","seasons","streamData","setStreamData","Provider","navigate","str","setStreamUrl","streamUrl","d","p","children","useMovie","useContext","Title","size","accentLink","accent","length","onClick","Card","showing","setShowing","measureRef","useRef","height","setHeight","useEffect","current","show","clientHeight","fullWidth","style","doTransition","ref","ErrorBanner","class","PercentageOverlay","percentage","Math","max","width","Fragment","MovieRow","progress","progressData","JSON","parse","localStorage","getItem","lookmovie","movie","full","floor","currentlyAt","totalDuration","year","Progress","failed","text","steps","toFixed","getCorsUrl","url","getVideoUrl","config","a","getAccessToken","accessToken","now","Date","fetch","then","json","videoOpts","videoUrl","res","includes","startsWith","data","token","getEpisodes","pageReq","JSON5","slice","indexOf","split","trim","getStreamUrl","season","episode","id_movie","episodeObj","find","v","id_episode","findContent","searchUrl","encodeURIComponent","searchRes","parser","DOMParser","doc","parseFromString","nodes","Array","from","querySelectorAll","results","map","node","querySelector","innerText","href","pop","fuse","Fuse","threshold","distance","keys","matchedResults","search","toString","result","item","options","forEach","r","push","TypeSelector","setType","choices","selected","noWrap","selectedIndex","findIndex","transformStyles","opacity","transform","label","SearchView","setOptions","setProgress","setText","setFailed","showingOptions","setShowingOptions","offlineStatus","setOfflineStatus","fail","getStream","realUrl","query","contentType","catch","fetchHealth","searchMovie","i","rel","NotFound","VideoPlaceholder","VideoElement","loading","videoRef","error","setError","hls","Hls","isSupported","canPlayType","attachMedia","loadSource","src","controls","autoPlay","onProgress","NumberSelector","EpisodeSelector","setSeason","setEpisode","currentSeason","currentEpisode","round","MovieView","seasonList","setSeasonList","episodeLists","setEpisodeList","setLoading","cancel","console","undefined","evt","ls","key","currentTarget","currentTime","duration","updatedAt","setItem","stringify","Router","App","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"+fAIO,SAASA,EAAMC,GAClB,OACI,sBAAMC,UAAU,QAAQC,wBAAyB,CAAEC,OAAO,uNAAD,OACmJH,EAAMI,KAAK,OAAO,GADrK,uK,MCD1D,SAASC,EAAT,GAA8C,IAA1BC,EAAyB,EAAzBA,SAAUC,EAAe,EAAfA,YACjC,EAAoCC,IAAMC,SAAS,IAAnD,mBAAOC,EAAP,KAAmBC,EAAnB,KAEA,OACI,uBAAMV,UAAU,WAAWK,SAAU,SAACM,GAGlC,OAFAA,EAAEC,iBACFP,EAASI,IACF,GAHX,UAKI,uBACII,KAAK,OACLb,UAAU,eACVc,GAAG,eACHR,YAAaA,EACbS,MAAON,EACPO,SAAU,SAACL,GAAD,OAAOD,EAAcC,EAAEM,OAAOF,QACxCG,UAAQ,IAEZ,wBAAQlB,UAAU,oBAAlB,SACI,uBAAMA,UAAU,OAAhB,mBAA6B,sBAAMA,UAAU,QAAhB,SAAwB,cAAC,EAAD,c,WCvB/DmB,EAAeZ,IAAMa,cAAc,MAElC,SAASC,EAActB,GAC1B,MAAwBQ,IAAMC,SAAS,UAAvC,mBAAOc,EAAP,KAAaC,EAAb,KACA,EAA4BhB,IAAMC,SAAS,IAA3C,mBAAOgB,EAAP,KAAeC,EAAf,KACA,EAAoClB,IAAMC,SAAS,CAAEkB,MAAO,GAAIC,KAAM,GAAId,KAAM,GAAIe,SAAU,GAAIC,QAAS,KAA3G,mBAAOC,EAAP,KAAmBC,EAAnB,KAEA,OACI,cAACZ,EAAaa,SAAd,CAAuBjB,MAAO,CAC1BkB,SAD0B,SACjBC,GACLX,EAAQW,IAEZZ,OACAa,aAAcV,EACdW,UAAWZ,EACXM,aACAC,cAR0B,SAQZM,GACVN,GAAc,SAAAO,GAAC,kCAASA,GAAKD,QATrC,SAYKtC,EAAMwC,WAKZ,SAASC,EAASzC,GACrB,OAAOQ,IAAMkC,WAAWtB,G,MCnBrB,SAASuB,EAAM3C,GAClB,IAAQkC,EAAaO,IAAbP,SACFU,EAAO5C,EAAM4C,MAAQ,MAErBC,EAAa7C,EAAM6C,YAAc,GACjCC,EAAS9C,EAAM8C,QAAU,GAC/B,OACI,gCACKA,EAAOC,OAAS,EACb,oBAAGC,QAAU,kBAAMH,EAAWE,OAAS,GAAKb,EAASW,IAAa5C,UAAS,uBAAkB4C,EAAWE,OAAS,EAAI,oBAAsB,IAA3I,UACKF,EAAWE,OAAS,EAAK,cAAC,EAAD,CAAO3C,MAAI,IAAM,KAAM0C,KAErD,KACJ,oBAAI7C,UAAW,UAAa2C,EAAO,cAAgBA,EAAO,IAA1D,SAAiE5C,EAAMwC,c,MCf5E,SAASS,EAAKjD,GAEjB,MAA8BQ,IAAMC,UAAS,GAA7C,mBAAOyC,EAAP,KAAgBC,EAAhB,KACMC,EAAa5C,IAAM6C,OAAO,MAChC,EAA4B7C,IAAMC,SAAS,GAA3C,mBAAO6C,EAAP,KAAeC,EAAf,KAQA,OANA/C,IAAMgD,WAAU,YACR,OAACJ,QAAD,IAACA,OAAD,EAACA,EAAYK,WACjBN,EAAWnD,EAAM0D,MACjBH,EAAUH,EAAWK,QAAQE,iBAC9B,CAAC3D,EAAM0D,KAAMN,IAGZ,qBAAKnD,UAAS,uBAAmBD,EAAM4D,UAAY,OAAS,IAAOC,MAAO,CACtEP,OAAQtD,EAAM8D,aAAgBZ,EAAUI,EAAS,EAAK,WAD1D,SAGI,qBAAKrD,UAAS,eAAWiD,EAAU,OAAS,GAA9B,YAAsClD,EAAM8D,aAAe,eAAiB,IAAOC,IAAKX,EAAtG,SACKpD,EAAMwC,a,MCpBhB,SAASwB,EAAT,GAAkC,IAAZxB,EAAW,EAAXA,SAC5B,OACC,qBAAKyB,MAAM,cAAX,SACEzB,I,YCHG,SAAS0B,EAAT,GAA4C,IAAfC,EAAc,EAAdA,WAInC,OAFGA,GAAcA,EAAa,IAAGA,EAAaC,KAAKC,IAAI,GAAIF,EAAa,GAAKA,EAAa,MAEnFA,EAAa,EACnB,qBAAKF,MAAM,cAAX,SACU,qBAAKA,MAAM,mBAAmBJ,MAAO,CAACS,MAAM,GAAD,OAAKH,EAAL,UAElD,cAAC,IAAMI,SAAP,ICJE,SAASC,EAASxE,GAErB,IACIyE,EAEuB,MAHrBC,EAAeC,KAAKC,MAAMC,aAAaC,QAAQ,mBAAqB,MAEtEX,EAAa,KACC,UAAfnE,EAAMc,QACL2D,EAAQ,OAAGC,QAAH,IAAGA,GAAH,UAAGA,EAAcK,iBAAjB,iBAAG,EAAyBC,aAA5B,iBAAG,EAAiChF,EAAM4B,aAA1C,aAAG,EAA8CqD,QAErDd,EAAaC,KAAKc,MAAOT,EAASU,YAAcV,EAASW,cAAiB,OAIlF,OACI,sBAAKnF,UAAU,WAAW+C,QAAS,kBAAMhD,EAAMgD,SAAWhD,EAAMgD,WAAhE,UACI,sBAAK/C,UAAU,OAAf,UACKD,EAAM2B,MADX,OAEI,uBAAM1B,UAAU,OAAhB,cAAyBD,EAAMqF,KAA/B,UAEJ,sBAAKpF,UAAU,QAAf,UACI,uCAAUD,EAAMc,QAChB,cAAC,EAAD,OAEJ,cAAC,EAAD,CAAmBqD,WAAYA,O,MCrBpC,SAASmB,EAAStF,GACrB,OACI,sBAAKC,UAAS,mBAAcD,EAAM0D,KAAK,GAAG,OAA5B,YAAsC1D,EAAMuF,OAAO,SAAS,IAA1E,UACMvF,EAAMwF,MAAQxF,EAAMwF,KAAKzC,OAAS,EAChC,4BAAI/C,EAAMwF,OAAa,KAC3B,qBAAKvF,UAAU,MAAf,SACI,qBAAKA,UAAU,YAAY4D,MAAO,CAC9BS,OAAQtE,EAAMyE,SAAWzE,EAAMyF,MAAQ,KAAKC,QAAQ,GAAK,Y,6BCZ7E,SAASC,EAAWC,GAChB,MAAM,4CAAN,OAAmDA,G,SAGxCC,E,8EAAf,WAA2BC,GAA3B,6BAAAC,EAAA,sEAC8BC,EAAeF,GAD7C,UACUG,EADV,OAEUC,EAAM9B,KAAKc,MAAMiB,KAAKD,MAAQ,KAEhCN,EAAM,GAEU,UAAhBE,EAAOhF,KACP8E,EAAMD,EAAW,8CAAD,OAA+CG,EAAO/E,GAAtD,YAA4DmF,EAA5D,YAAmED,EAAnE,iBACO,SAAhBH,EAAOhF,OACd8E,EAAMD,EAAW,6CAAD,OAA8CM,EAA9C,YAA6DC,EAA7D,YAAoEJ,EAAO/E,GAA3E,mBAGhB6E,EAZR,iCAagCQ,MAAMR,GAAKS,MAAK,SAAC/D,GAAD,OAAOA,EAAEgE,UAbzD,OAmBQ,IANMC,EAbd,OAkBYC,EAAW,GACf,MAHa,CAAC,QAAS,OAAQ,OAAQ,MAAO,OAAQ,MAAO,QAG7D,gBACQD,EADCE,EAAa,OACKF,EAAUE,GAAKC,SAAS,UAAaH,EAAUE,GAAKC,SAAS,eAAkBF,IAClGA,EAAWD,EAAUE,IArBrC,yBAyBeD,EAASG,WAAW,KAAOhB,EAAW,wBAAD,OAAyBa,IAAcb,EAAWa,IAzBtG,iCA4BW,iBA5BX,6C,+BA+BeR,E,8EAAf,WAA8BF,GAA9B,qBAAAC,EAAA,6DACQH,EAAM,GAEU,UAAhBE,EAAOhF,KACP8E,EAAMD,EAAW,8DAAD,OAA+DG,EAAO/E,GAAtE,wBACO,SAAhB+E,EAAOhF,OACd8E,EAAMD,EAAW,yDAAD,OAA0DG,EAAOlE,KAAjE,oBANxB,SASuBwE,MAAMR,GAAKS,MAAK,SAAC/D,GAAD,OAAOA,EAAEgE,UAThD,UASUM,EATV,SAWUC,EAXV,OAWkBD,QAXlB,IAWkBA,GAXlB,UAWkBA,EAAMA,YAXxB,aAWkB,EAAYX,aAX9B,yCAYsBY,GAZtB,gCAcW,mCAdX,4C,+BAiBeC,E,8EAAf,WAA2BlF,GAA3B,mBAAAmE,EAAA,6DACUH,EAAMD,EAAW,mCAAD,OAAoC/D,IAD9D,SAE0BwE,MAAMR,GAAKS,MAAK,SAAC/D,GAAD,OAAOA,EAAEkD,UAFnD,cAEUuB,EAFV,OAIUH,EAAOI,IAAMpC,MAAM,IACrBmC,EACKE,MAAMF,EAAQG,QAAR,iBACNC,MAAM,MAAM,GACZA,MAAM,OAAO,GACbC,OACL,KAVR,kBAaWR,EAAK9E,SAbhB,4C,+BAgBeuF,E,oFAAf,WAA4BzF,EAAMd,EAAMwG,EAAQC,GAAhD,yBAAAxB,EAAA,6DACUH,EAAMD,EAAW,wBAAD,OAAyB7E,EAAzB,kBAAuCc,IADjE,SAE0BwE,MAAMR,GAAKS,MAAK,SAAC/D,GAAD,OAAOA,EAAEkD,UAFnD,UAEUuB,EAFV,OAIUH,EAAOI,IAAMpC,MAAM,IACrBmC,EACKE,MAAMF,EAAQG,QAAR,UAAmBpG,EAAnB,cACNqG,MAAM,MAAM,GACZA,MAAM,OAAO,GACbC,OACL,KAGArG,EAAK,GAEI,UAATD,EACNC,EAAK6F,EAAKY,SACS,SAAT1G,IACJ2G,EAAab,EAAK9E,QAAQ4F,MAAK,SAACC,GAAQ,OAAOA,EAAEL,SAAWA,GAAUK,EAAEJ,UAAYA,QAGzFxG,EAAK0G,EAAWG,YAIJ,KAAP7G,EAzBR,yCA0Be,CAAE6E,IAAK,KA1BtB,wBA6B2BC,EAAY,CAC/BjE,KAAMA,EACNb,GAAIA,EACJD,KAAMA,IAhCd,eA6BU0F,EA7BV,yBAmCW,CAAEZ,IAAKY,IAnClB,6C,+BAsCeqB,E,gFAAf,WAA2BnH,EAAYI,GAAvC,yCAAAiF,EAAA,6DAEU+B,EAAYnC,EAAW,wBAAD,OAAyB7E,EAAzB,uBAA4CiH,mBAAmBrH,KAF/F,SAG4B0F,MAAM0B,GAAWzB,MAAK,SAAC/D,GAAD,OAAOA,EAAEkD,UAH3D,UAGUwC,EAHV,OAMUC,EAAS,IAAIC,UACbC,EAAMF,EAAOG,gBAAgBJ,EAAW,aACxCK,EAAQC,MAAMC,KAAKJ,EAAIK,iBAAiB,wBACxCC,EAAUJ,EAAMK,KAAI,SAAAC,GACtB,MAAO,CACH7H,OACAa,MAAOgH,EAAKC,cAAc,QAAQC,UAAUzB,OAC5C/B,KAAMsD,EAAKC,cAAc,SAASC,UAAUzB,OAC5CxF,KAAM+G,EAAKC,cAAc,KAAKE,KAAK3B,MAAM,KAAK4B,UAIhDC,EAAO,IAAIC,IAAKR,EAAS,CAAES,UAAW,GAAKC,SAAU,IAAKC,KAAM,CAAC,WAKzC,KAJxBC,EAAiBL,EAClBM,OAAO5I,EAAW6I,YAClBb,KAAI,SAACc,GAAD,OAAYA,EAAOC,SAET1G,OAvBvB,0CAwBe,CAAE2G,QAAS,KAxB1B,aA2BQL,EAAetG,OAAS,GA3BhC,wBA4Bc0D,EAAM,CAAEiD,QAAS,IAEvBL,EAAeM,SAAQ,SAACC,GAAD,OAAOnD,EAAIiD,QAAQG,KAAK,CAC3ClI,MAAOiI,EAAEjI,MACTC,KAAMgI,EAAEhI,KACRd,KAAM8I,EAAE9I,KACRuE,KAAMuE,EAAEvE,UAlCpB,kBAqCeoB,GArCf,iBAuC4C4C,EAAe,GAA3C1H,EAvChB,EAuCgBA,MAAOC,EAvCvB,EAuCuBA,KAAMd,EAvC7B,EAuC6BA,KAAMuE,EAvCnC,EAuCmCA,KAvCnC,kBAyCe,CACHqE,QAAS,CAAC,CAAE/H,QAAOC,OAAMd,OAAMuE,WA1C3C,6C,4BCtGO,SAASyE,EAAT,GAAuE,IAA/CC,EAA8C,EAA9CA,QAASC,EAAqC,EAArCA,QAASC,EAA4B,EAA5BA,SAA4B,IAAlBC,cAAkB,SACnEC,EAAgBH,EAAQI,WAAU,SAAAzC,GAAC,OAAEA,EAAE3G,QAAQiJ,KAC/CI,EAAkB,CACpBC,SAA0B,IAAjBH,EAAmB,EAAE,EAC9BI,UAAU,cAAD,QAAiC,IAAjBJ,EAAiC,EAAdA,EAAgB,EAAnD,SAEb,OACI,sBAAKlK,UAAS,uBAAkBiK,EAAS,SAAW,IAApD,UACKF,EAAQtB,KAAI,SAAAf,GAAC,OACV,qBAAmB1H,UAAS,iBAAYgK,IAAWtC,EAAE3G,MAAM,WAAW,IAAMgC,QAAS,kBAAM+G,EAAQpC,EAAE3G,QAArG,SACK2G,EAAE6C,OADG7C,EAAE3G,UAIhB,qBAAKf,UAAU,cAAc4D,MAAOwG,O,MCNzC,SAASI,IACZ,MAAkDhI,IAA1CP,EAAR,EAAQA,SAAUE,EAAlB,EAAkBA,aAAcJ,EAAhC,EAAgCA,cAGhC,EAA8BxB,IAAMC,SAAS,IAA7C,mBAAOiJ,EAAP,KAAgBgB,EAAhB,KACA,EAAgClK,IAAMC,SAAS,GAA/C,mBAAOgE,EAAP,KAAiBkG,EAAjB,KACA,EAAwBnK,IAAMC,SAAS,IAAvC,mBAAO+E,EAAP,KAAaoF,EAAb,KACA,EAA4BpK,IAAMC,UAAS,GAA3C,mBAAO8E,EAAP,KAAesF,EAAf,KACA,EAA4CrK,IAAMC,UAAS,GAA3D,mBAAOqK,EAAP,KAAuBC,EAAvB,KACA,EAA0CvK,IAAMC,UAAS,GAAzD,mBAAOuK,EAAP,KAAsBC,EAAtB,KACA,EAAwBzK,IAAMC,SAAS,SAAvC,mBAAOK,EAAP,KAAaiJ,EAAb,KAEMmB,EAAO,SAAC/I,GACVwI,EAVa,GAWbC,EAAQzI,GACR0I,GAAU,IAfW,SAkBVM,EAlBU,kFAkBzB,WAAyBxJ,EAAOC,EAAMd,GAAtC,uBAAAiF,EAAA,yDACI3D,EAAa,IADjB,SAIQuI,EAAY,GACZC,EAAQ,uBAAD,OAAwBjJ,EAAxB,MAEHG,EAAU,GACVD,EAAW,GACF,SAATf,EATZ,iCAUsCgG,EAAYlF,GAVlD,cAWwB+H,SAAQ,SAAC/I,GACZkB,EAAQ4E,SAAS9F,EAAE0G,SACpBxF,EAAQ+H,KAAKjJ,EAAE0G,QAEdzF,EAASjB,EAAE0G,UACZzF,EAASjB,EAAE0G,QAAU,IACzBzF,EAASjB,EAAE0G,QAAQuC,KAAKjJ,EAAE2G,YAjB1C,WAsBY6D,EAAU,GACD,UAATtK,EAvBZ,kCAwBkCuG,EAAazF,EAAMd,GAxBrD,oBA0BwB,MAFJ8E,EAxBpB,EAwBoBA,KAxBpB,0CA2BuBsF,EAAK,cAAD,OAAevJ,KA3B1C,QA6BYyJ,EAAUxF,EA7BtB,QAgCQ+E,EA/CS,GAgDTvI,EAAagJ,GACbpJ,EAAc,CACVL,QACAb,OACAgB,UACAD,WACAD,SAEJgJ,EAAQ,gBACR1I,EAAS,SA1CjB,kDA4CQgJ,EAAK,wBA5Cb,2DAlByB,kEAkEzB,WAA2BG,EAAOC,GAAlC,yBAAAvF,EAAA,6DACI8E,GAAU,GACVD,EAAQ,iBAAD,OAAkBU,EAAlB,aAAkCD,EAAlC,MACPV,EAAY,GACZI,GAAkB,GAJtB,kBAOkClD,EAAYwD,EAAOC,GAPrD,mBAS+B,KAFf5B,EAPhB,EAOgBA,SAEI3G,OATpB,0CAUmBmI,EAAK,uBAAD,OAAwBI,KAV/C,aAWmB5B,EAAQ3G,OAAS,GAXpC,wBAYY4H,EAAY,GACZC,EAAQ,eAAD,OAAgBU,IACvBZ,EAAWhB,GACXqB,GAAkB,GAf9B,6BAmBsCrB,EAAQ,GAA9B/H,EAnBhB,EAmBgBA,MAAOC,EAnBvB,EAmBuBA,KAAMd,EAnB7B,EAmB6BA,KACrBqK,EAAUxJ,EAAOC,EAAMd,GApB/B,kDAsBQoK,EAAK,mBAAD,OAAoBI,IAtBhC,2DAlEyB,sBAuGzB,OAXA9K,IAAMgD,WAAU,WAAM,4CAClB,sBAAAuC,EAAA,4DACqB,iEADrB,SAEUK,MADW,kEACKmF,OAAM,WAExBN,EAAiB,4DAJzB,4CADkB,uBAAC,WAAD,wBAQlBO,KACD,IAGC,sBAAKvL,UAAU,WAAf,UACI,eAAC,EAAD,WACK+K,EAAgB,cAAC,EAAD,UAAcA,IAA+B,GAC9D,cAAC,EAAD,CAAOlI,OAAO,6CAAd,sCAGA,cAAC,EAAD,CACIiH,QAAS,SAACjJ,GAAD,OAAUiJ,EAAQjJ,IAC3BkJ,QAAS,CACL,CAAEQ,MAAO,QAASxJ,MAAO,SACzB,CAAEwJ,MAAO,UAAWxJ,MAAO,SAE/BkJ,QAAQ,EACRD,SAAUnJ,IAEd,cAAC,EAAD,CAAUP,YAAuB,UAATO,EAAmB,WAAa,WAAaR,SAAU,SAAC6B,GAAD,OAvHlE,6CAuH2EsJ,CAAYtJ,EAAKrB,MACzG,cAAC,EAAD,CAAU4C,KAAMe,EAAW,EAAGc,OAAQA,EAAQd,SAAUA,EAAUgB,MArH7D,EAqH8ED,KAAMA,OAG7F,eAAC,EAAD,CAAM9B,KAAMoH,EAAgBhH,cAAY,EAAxC,UACI,eAAC,EAAD,CAAOlB,KAAK,SAAZ,qCAC6B9B,EAD7B,iBADJ,OAIK4I,QAJL,IAIKA,OAJL,EAIKA,EAAShB,KAAI,SAACf,EAAG+D,GAAJ,OACV,cAAC,EAAD,CAAkB/J,MAAOgG,EAAEhG,MAAOC,KAAM+F,EAAE/F,KAAMd,KAAM6G,EAAE7G,KAAMuE,KAAMsC,EAAEtC,KAAMiC,OAAQK,EAAEL,OAAQC,QAASI,EAAEJ,QAASvE,QAAS,WACvH+H,GAAkB,GAClBI,EAAUxD,EAAEhG,MAAOgG,EAAE/F,KAAM+F,EAAE7G,KAAM6G,EAAEL,OAAQK,EAAEJ,WAFpCmE,SAMvB,qBAAKzL,UAAU,kBAAf,SACI,oBAAG6I,KAAK,6CAA6C5H,OAAO,SAASyK,IAAI,aAAzE,oCAA6G,cAAC,EAAD,YCjJtH,SAASC,EAAS5L,GACrB,OACI,qBAAKC,UAAU,WAAf,SACI,cAAC,EAAD,UACI,cAAC,EAAD,CAAO6C,OAAO,2BAAd,gC,gCCLT,SAAS+I,EAAiB7L,GAChC,OACC,qBAAKC,UAAU,mBAAf,SACC,qBAAKA,UAAU,sBAAf,SACC,4BAAID,EAAMwC,eCAP,SAASsJ,EAAT,GAA4D,IAApCzJ,EAAmC,EAAnCA,UAAW0J,EAAwB,EAAxBA,QAASpB,EAAe,EAAfA,YACzCqB,EAAWxL,IAAM6C,OAAO,MAC9B,EAA0B7C,IAAMC,UAAS,GAAzC,mBAAOwL,EAAP,KAAcC,EAAd,KAoBA,OAlBA1L,IAAMgD,WAAU,WAEZ,GADA0I,GAAS,GACJF,GAAaA,EAASvI,SAAYpB,GAAkC,IAArBA,EAAUU,SAAgBgJ,EAA9E,CAEA,IAAMI,EAAM,IAAIC,IAEXA,IAAIC,gBAAiBL,EAASvI,QAAQ6I,YAAY,iCAG3CF,IAAIC,eAKhBF,EAAII,YAAYP,EAASvI,SACzB0I,EAAIK,WAAWnK,IALX6J,GAAS,GAHTF,EAASvI,QAAQgJ,IAAMpK,KAS5B,CAAC2J,EAAU3J,EAAW0J,IAErBE,EACQ,cAAC,EAAD,4CAERF,EACO,cAAC,EAAD,iCAEN1J,GAAkC,IAArBA,EAAUU,OAIxB,uBAAO9C,UAAU,eAAe8D,IAAKiI,EAAUU,UAAQ,EAACC,UAAQ,EAACC,WAAYjC,IAHtE,cAAC,EAAD,gC,MC5BR,SAASkC,EAAT,GAAyD,IAA/B9C,EAA8B,EAA9BA,QAASC,EAAqB,EAArBA,QAASC,EAAY,EAAZA,SAC/C,OACI,qBAAKhK,UAAU,iBAAf,SACK+J,EAAQtB,KAAI,SAAAf,GAAC,OACV,qBAAmB1H,UAAU,gBAA7B,SACI,sBAAKA,UAAS,iBAAYgK,GAAUA,IAAWtC,EAAE3G,MAAM,WAAW,IAAMgC,QAAS,kBAAM+G,EAAQpC,EAAE3G,QAAjG,UACK2G,EAAE6C,MACH,cAAC,EAAD,CAAmBrG,WAAYwD,EAAExD,iBAH/BwD,EAAE3G,Y,MCPrB,SAAS8L,EAAT,GAAqH,IAA1FC,EAAyF,EAAzFA,UAAWC,EAA8E,EAA9EA,WAAYlL,EAAkE,EAAlEA,QAASwF,EAAyD,EAAzDA,OAAQzF,EAAiD,EAAjDA,SAAUoL,EAAuC,EAAvCA,cAAeC,EAAwB,EAAxBA,eAEzFlD,GAFiH,EAARpI,KAE/FC,EAAS6G,KAAI,SAAAf,GAAM,IAAD,MAE1BjD,EAAeC,KAAKC,MAAMC,aAAaC,QAAQ,mBAAqB,MAEpEK,EAAc,EACdC,EAAgB,EAEdX,EAAQ,OAAGC,QAAH,IAAGA,GAAH,UAAGA,EAAcK,iBAAjB,iBAAG,EAAyBrB,YAA5B,iBAAG,EAA+B9B,YAAlC,aAAG,YAAyC0F,EAAzC,YAAmDK,IACjElD,IACCU,EAAcV,EAASU,YACvBC,EAAgBX,EAASW,eAG7B,IAAMjB,EAAaC,KAAK+I,MAAOhI,EAAcC,EAAiB,KAE9D,MAAO,CACHpE,MAAO2G,EAAE4B,WACTiB,MAAO7C,EACPxD,kBAIR,OACI,sBAAKlE,UAAU,kBAAf,UACI,cAAC,EAAD,CAAc8J,QAASgD,EAAW/C,QAASlI,EAAQ4G,KAAI,SAAAf,GAAC,MAAG,CAAE3G,MAAO2G,EAAE4B,WAAYiB,MAAM,UAAD,OAAY7C,OAAQsC,SAAUgD,IAAgB,uBACrI,cAAC,EAAD,CAAgBlD,QAAS,SAACnJ,GAAD,OAAOoM,EAAW,CAACzF,QAAS3G,EAAG0G,OAAQ2F,KAAiBjD,QAASA,EAASC,SAAUiD,EAAe5F,SAAW2F,EAAcC,EAAe3F,QAAQ,U,MCvBjL,SAAS6F,EAAUpN,GACtB,MAAgDyC,IAAxCJ,EAAR,EAAQA,UAAWN,EAAnB,EAAmBA,WAAYK,EAA/B,EAA+BA,aAC/B,EAA4B5B,IAAMC,SAAS,KAA3C,mBAAO6G,EAAP,KAAeyF,EAAf,KACA,EAAoCvM,IAAMC,SAAS,IAAnD,mBAAO4M,EAAP,KAAmBC,EAAnB,KACA,EAAuC9M,IAAMC,SAAS,IAAtD,mBAAO8M,EAAP,KAAqBC,EAArB,KACA,EAA8BhN,IAAMC,SAAS,CAAE8G,QAAS,KAAMD,OAAQ,OAAtE,mBAAOC,EAAP,KAAgByF,EAAhB,KACA,EAA8BxM,IAAMC,UAAS,GAA7C,mBAAOsL,EAAP,KAAgB0B,EAAhB,KAEAjN,IAAMgD,WAAU,WACZgK,EAAezL,EAAWF,SAASyF,MACpC,CAACA,EAAQvF,EAAWF,WAEvBrB,IAAMgD,WAAU,WACY,SAApBzB,EAAWjB,OACXwM,EAAcvL,EAAWD,SACzBiL,EAAUhL,EAAWD,QAAQ,IAE7BkL,EAAW,CAAEzF,QAASxF,EAAWF,SAASE,EAAWD,QAAQ,IAAI,GAAIwF,OAAQvF,EAAWD,QAAQ,KAChG0L,EAAezL,EAAWF,SAASE,EAAWD,QAAQ,QAE3D,CAACC,IAEJvB,IAAMgD,WAAU,WACZ,IAAIkK,GAAS,EAEb,MAAwB,SAApB3L,EAAWjB,KAAwB,WACnC4M,GAAS,GAERnG,EAAQA,SAKbkG,GAAW,GAEXpG,EAAatF,EAAWH,KAAMG,EAAWjB,KAAMyG,EAAQD,OAAQC,EAAQA,SAClElB,MAAK,YAAY,IAAVT,EAAS,EAATA,IACA8H,IACJtL,EAAawD,GACb6H,GAAW,OAEdlC,OAAM,SAAA3K,GACC8M,GACJC,QAAQ1B,MAAMrL,MAEf,WACH8M,GAAS,KAjBTD,GAAW,QACXrL,EAAa,OAkBlB,CAACmF,EAASxF,EAAYK,IA8BzB,OACI,qBAAKnC,UAAS,4BAAuB8B,EAAWjB,MAAhD,SACI,eAAC,EAAD,CAAM8C,WAAS,EAAf,UACI,cAAC,EAAD,CAAOd,OAAO,iBAAiBD,WAAW,SAA1C,SACKd,EAAWJ,QAEK,SAApBI,EAAWjB,KAAkB,eAAC,EAAD,CAAO8B,KAAK,QAAZ,oBAClB2E,EAAQD,OADU,aACQC,EAAQA,gBACnCqG,EACX,cAAC,EAAD,CAAcvL,UAAWA,EAAW0J,QAASA,EAASpB,YArC9C,SAACkD,GACjB,IAAIC,EAAKnJ,KAAKC,MAAMC,aAAaC,QAAQ,mBAAqB,MAG1DgJ,EAAG/I,YAAW+I,EAAG/I,UAAY,IAC7B+I,EAAG/I,UAAUhD,EAAWjB,QAAOgN,EAAG/I,UAAUhD,EAAWjB,MAAQ,IAC/DgN,EAAG/I,UAAUhD,EAAWjB,MAAMiB,EAAWH,QACzCkM,EAAG/I,UAAUhD,EAAWjB,MAAMiB,EAAWH,MAAQ,IAIrD,IAAImM,EAA0B,SAApBhM,EAAWjB,KAAX,UAAgCwG,EAAhC,YAA0CC,EAAQA,SAAY,OACxEuG,EAAG/I,UAAUhD,EAAWjB,MAAMiB,EAAWH,MAAMmM,GAAO,CAClD5I,YAAaf,KAAKc,MAAM2I,EAAIG,cAAcC,aAC1C7I,cAAehB,KAAKc,MAAM2I,EAAIG,cAAcE,UAC5CC,UAAWhI,KAAKD,OAGG,SAApBnE,EAAWjB,OACVgN,EAAG/I,UAAUhD,EAAWjB,MAAMiB,EAAWH,MAAMmM,GAAKrK,KAAO,CACvD4D,SACAC,QAASA,EAAQA,UAIzB1C,aAAauJ,QAAQ,iBAAkBzJ,KAAK0J,UAAUP,OAazB,SAApB/L,EAAWjB,KACR,cAAC,EAAD,CACIiM,UAAWA,EACXC,WAAYA,EACZ1F,OAAQA,EACRxF,QAASuL,EACTxL,SAAU0L,EACV3L,KAAMG,EAAWH,KACjBqL,cAAe3F,EACf4F,eAAgB3F,IAEtB,QCtGlB,SAAS+G,IACP,IAAQ/M,EAASkB,IAATlB,KAER,MAAa,WAATA,EACK,cAACkJ,EAAD,IAGI,UAATlJ,EACK,cAAC6L,EAAD,IAIP,cAACxB,EAAD,IAYW2C,MARf,WACE,OACE,cAACjN,EAAD,UACE,cAACgN,EAAD,OCpBNE,IAASC,OACP,cAAC,IAAMC,WAAP,UACE,cAAC,EAAD,MAEFC,SAASC,eAAe,W","file":"static/js/main.1808ff90.chunk.js","sourcesContent":["import React from 'react'\nimport './Arrow.css'\n\n// left?: boolean\nexport function Arrow(props) {\n    return (\n        <span className=\"arrow\" dangerouslySetInnerHTML={{ __html: `\n            <svg xmlns=\"http://www.w3.org/2000/svg\" width=\"1em\" height=\"1em\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" stroke-width=\"2\" stroke-linecap=\"round\" stroke-linejoin=\"round\" class=\"feather ${props.left?'left':''}\"}>\n                <line x1=\"5\" y1=\"12\" x2=\"19\" y2=\"12\"></line>\n                <polyline points=\"12 5 19 12 12 19\"></polyline>\n            </svg>\n        `}}>\n        </span>\n    )\n}\n","import React from 'react';\nimport { Arrow } from './Arrow';\nimport './InputBox.css'\n\n// props = { onSubmit: (str) => {}, placeholder: string}\nexport function InputBox({ onSubmit, placeholder }) {\n    const [searchTerm, setSearchTerm] = React.useState(\"\");\n\n    return (\n        <form className=\"inputBar\" onSubmit={(e) => {\n            e.preventDefault();\n            onSubmit(searchTerm)\n            return false;\n        }}>\n            <input\n                type='text'\n                className=\"inputTextBox\"\n                id=\"inputTextBox\"\n                placeholder={placeholder}\n                value={searchTerm}\n                onChange={(e) => setSearchTerm(e.target.value)}\n                required\n            />\n            <button className=\"inputSearchButton\">\n                <span className=\"text\">Search<span className=\"arrow\"><Arrow /></span></span>\n            </button>\n        </form>\n    )\n}\n","import React from 'react'\nconst MovieContext = React.createContext(null)\n\nexport function MovieProvider(props) {\n    const [page, setPage] = React.useState(\"search\");\n    const [stream, setStream] = React.useState(\"\");\n    const [streamData, setStreamData] = React.useState({ title: \"\", slug: \"\", type: \"\", episodes: [], seasons: [] })\n\n    return (\n        <MovieContext.Provider value={{\n            navigate(str) {\n                setPage(str)\n            },\n            page,\n            setStreamUrl: setStream,\n            streamUrl: stream,\n            streamData,\n            setStreamData(d) {\n                setStreamData(p => ({...p,...d}))\n            },\n        }}>\n            {props.children}\n        </MovieContext.Provider>\n    )\n}\n\nexport function useMovie(props) {\n    return React.useContext(MovieContext);\n}\n","import React from 'react';\nimport { useMovie } from '../hooks/useMovie'\nimport { Arrow } from '../components/Arrow'\nimport './Title.css'\n\n// size: \"big\" | \"medium\" | \"small\" | null\n// accent: string | null\n// accentLink: string | null\nexport function Title(props) {\n    const { navigate } = useMovie();\n    const size = props.size || \"big\";\n\n    const accentLink = props.accentLink || \"\";\n    const accent = props.accent || \"\";\n    return (\n        <div>\n            {accent.length > 0 ? (\n                <p onClick={ () => accentLink.length > 0 && navigate(accentLink)} className={`title-accent ${accentLink.length > 0 ? 'title-accent-link' : ''}`}>\n                    {accentLink.length > 0 ? (<Arrow left/>) : null}{accent}\n                </p>\n            ) : null}\n            <h1 className={\"title \" + ( size ? 'title-size-' + size : '' )}>{props.children}</h1>\n        </div>\n    )\n}\n","import React from 'react'\nimport './Card.css'\n\n// fullWidth: boolean\n// show: boolean\n// doTransition: boolean\nexport function Card(props) {\n\n    const [showing, setShowing] = React.useState(false);\n    const measureRef = React.useRef(null)\n    const [height, setHeight] = React.useState(0);\n\n    React.useEffect(() => {\n        if (!measureRef?.current) return;\n        setShowing(props.show);\n        setHeight(measureRef.current.clientHeight)\n    }, [props.show, measureRef])\n\n    return (\n        <div className={`card-wrapper ${ props.fullWidth ? 'full' : '' }`} style={{\n            height: props.doTransition ? (showing ? height : 0) : \"initial\",\n        }}>\n            <div className={`card ${ showing ? 'show' : '' } ${ props.doTransition ? 'doTransition' : '' }`} ref={measureRef}>\n                {props.children}\n            </div>\n        </div>\n    )\n}\n","import React from 'react';\nimport './ErrorBanner.css';\n\nexport function ErrorBanner({children}) {\n\treturn (\n\t\t<div class=\"errorBanner\">\n\t\t\t{children}\n\t\t</div>\n\t)\n}","import React from 'react'\nimport './PercentageOverlay.css'\n\nexport function PercentageOverlay({ percentage }) {\n\n\tif(percentage && percentage > 3) percentage = Math.max(20, percentage < 90 ? percentage : 100)\n\n\treturn percentage > 0 ? (\n\t\t<div class=\"progressBar\">\n            <div class=\"progressBarInner\" style={{width: `${percentage}%`}}></div>\n        </div>\n\t) : <React.Fragment></React.Fragment>\n}","import React from 'react'\nimport { Arrow } from './Arrow'\nimport './MovieRow.css'\nimport { PercentageOverlay } from './PercentageOverlay'\n\n// title: string\n// onClick: () => void\nexport function MovieRow(props) {\n\n    const progressData = JSON.parse(localStorage.getItem(\"video-progress\") || \"{}\")\n    let progress;\n    let percentage = null;\n    if(props.type === \"movie\") {\n        progress = progressData?.lookmovie?.movie?.[props.slug]?.full\n        if(progress) {\n            percentage = Math.floor((progress.currentlyAt / progress.totalDuration) * 100)\n        }\n    }\n\n    return (\n        <div className=\"movieRow\" onClick={() => props.onClick && props.onClick()}>\n            <div className=\"left\">\n                {props.title}&nbsp;\n                <span className=\"year\">({props.year})</span>\n            </div>\n            <div className=\"watch\">\n                <p>Watch {props.type}</p>\n                <Arrow/>\n            </div>\n            <PercentageOverlay percentage={percentage} />\n        </div>\n    )\n}\n","import React from 'react'\nimport './Progress.css'\n\n// show: boolean\n// progress: number\n// steps: number\n// text: string\n// failed: boolean\nexport function Progress(props) {\n    return (\n        <div className={`progress ${props.show?'':'hide'} ${props.failed?'failed':''}`}>\n            { props.text && props.text.length > 0 ? (\n                <p>{props.text}</p>) : null}\n            <div className=\"bar\">\n                <div className=\"bar-inner\" style={{\n                    width: (props.progress / props.steps * 100).toFixed(0) + \"%\"\n                }}/>\n            </div>\n        </div>\n    )\n}","import Fuse from 'fuse.js'\nimport JSON5 from 'json5'\n\nfunction getCorsUrl(url) {\n    return `https://hidden-inlet-27205.herokuapp.com/${url}`;\n}\n\nasync function getVideoUrl(config) {\n    const accessToken = await getAccessToken(config);\n    const now = Math.floor(Date.now() / 1e3);\n\n    let url = '';\n\n    if (config.type === 'movie') {\n        url = getCorsUrl(`https://lookmovie.io/manifests/movies/json/${config.id}/${now}/${accessToken}/master.m3u8`);\n    } else if (config.type === 'show') {\n        url = getCorsUrl(`https://lookmovie.io/manifests/shows/json/${accessToken}/${now}/${config.id}/master.m3u8`);\n    }\n\n    if (url) {\n        const videoOpts = await fetch(url).then((d) => d.json());\n\n        // Find video URL and return it (with a check for a full url if needed)\n        const opts = [\"1080p\", \"1080\", \"720p\", \"720\", \"480p\", \"480\", \"auto\"]\n\n        let videoUrl = \"\";\n        for (let res of opts) {\n            if (videoOpts[res] && !videoOpts[res].includes('dummy') && !videoOpts[res].includes('earth-1984') && !videoUrl) {\n                videoUrl = videoOpts[res]\n            }\n        }\n\n        return videoUrl.startsWith(\"/\") ? getCorsUrl(`https://lookmovie.io/${videoUrl}`) : getCorsUrl(videoUrl);\n    }\n\n    return \"Invalid type.\";\n}\n\nasync function getAccessToken(config) {\n    let url = '';\n\n    if (config.type === 'movie') {\n        url = getCorsUrl(`https://lookmovie.io/api/v1/security/movie-access?id_movie=${config.id}&token=1&sk=&step=1`);\n    } else if (config.type === 'show') {\n        url = getCorsUrl(`https://lookmovie.io/api/v1/security/show-access?slug=${config.slug}&token=&step=2`);\n    }\n\n    const data = await fetch(url).then((d) => d.json());\n\n    const token = data?.data?.accessToken;\n    if (token) return token;\n\n    return \"Invalid type provided in config\";\n}\n\nasync function getEpisodes(slug) {\n    const url = getCorsUrl(`https://lookmovie.io/shows/view/${slug}`);\n    const pageReq = await fetch(url).then((d) => d.text());\n\n    const data = JSON5.parse(\"{\" +\n        pageReq\n            .slice(pageReq.indexOf(`show_storage`))\n            .split(\"};\")[0]\n            .split(\"= {\")[1]\n            .trim() +\n        \"}\"\n    );\n\n    return data.seasons\n}\n\nasync function getStreamUrl(slug, type, season, episode) {\n    const url = getCorsUrl(`https://lookmovie.io/${type}s/view/${slug}`);\n    const pageReq = await fetch(url).then((d) => d.text());\n\n    const data = JSON5.parse(\"{\" +\n        pageReq\n            .slice(pageReq.indexOf(`${type}_storage`))\n            .split(\"};\")[0]\n            .split(\"= {\")[1]\n            .trim() +\n        \"}\"\n    );\n\n    let id = '';\n\n    if (type === \"movie\") {\n\t\tid = data.id_movie;\n\t} else if (type === \"show\") {\n\t\tconst episodeObj = data.seasons.find((v) => { return v.season === season && v.episode === episode; });\n\n        if (episodeObj) {\n\t\t\tid = episodeObj.id_episode;\n\t\t}\n\t}\n\n    if (id === '') {\n        return { url: '' }\n    }\n\n    const videoUrl = await getVideoUrl({\n        slug: slug,\n        id: id,\n        type: type,\n    });\n\n    return { url: videoUrl }\n}\n\nasync function findContent(searchTerm, type) {    \n    // const searchUrl = getCorsUrl(`https://lookmovie.io/api/v1/${type}s/search/?q=${encodeURIComponent(searchTerm)}`);\n    const searchUrl = getCorsUrl(`https://lookmovie.io/${type}s/search/?q=${encodeURIComponent(searchTerm)}`);\n    const searchRes = await fetch(searchUrl).then((d) => d.text());\n    \n    // Parse DOM to find search results on full search page\n    const parser = new DOMParser();\n    const doc = parser.parseFromString(searchRes, \"text/html\");\n    const nodes = Array.from(doc.querySelectorAll('.movie-item-style-1'));\n    const results = nodes.map(node => {\n        return {\n            type,\n            title: node.querySelector('h6 a').innerText.trim(),\n            year: node.querySelector('.year').innerText.trim(),\n            slug: node.querySelector('a').href.split('/').pop(),\n        }\n    });\n\n    const fuse = new Fuse(results, { threshold: 0.3, distance: 200, keys: [\"title\"] });\n    const matchedResults = fuse\n        .search(searchTerm.toString())\n        .map((result) => result.item);\n\n    if (matchedResults.length === 0) {\n        return { options: [] }\n    }\n\n    if (matchedResults.length > 1) {\n        const res = { options: [] };\n        \n        matchedResults.forEach((r) => res.options.push({\n            title: r.title,\n            slug: r.slug,\n            type: r.type,\n            year: r.year\n        }));\n\n        return res;\n    } else {\n        const { title, slug, type, year } = matchedResults[0];\n        \n        return {\n            options: [{ title, slug, type, year }]\n        }\n    }\n}\n\nexport { findContent, getStreamUrl, getEpisodes };","import React from 'react';\n// import { Arrow } from './Arrow';\nimport './TypeSelector.css'\n\n// setType: (txt: string) => void\n// choices: { label: string, value: string }[]\n// selected: string\nexport function TypeSelector({ setType, choices, selected, noWrap = false }) {\n    const selectedIndex = choices.findIndex(v=>v.value===selected);\n    const transformStyles = {\n        opacity: selectedIndex!==-1?1:0,\n        transform: `translateX(${selectedIndex!==-1?selectedIndex*7:0}rem)`\n    }\n    return (\n        <div className={`typeSelector ${noWrap ? 'nowrap' : ''}`}>\n            {choices.map(v=>(\n                <div key={v.value} className={`choice ${selected===v.value?'selected':''}`} onClick={() => setType(v.value)}>\n                    {v.label}\n                </div>\n            ))}\n            <div className=\"selectedBar\" style={transformStyles}/>\n        </div>\n    )\n}\n","import React from 'react';\nimport { InputBox } from '../components/InputBox'\nimport { Title } from '../components/Title'\nimport { Card } from '../components/Card'\nimport { ErrorBanner } from '../components/ErrorBanner'\nimport { MovieRow } from '../components/MovieRow'\nimport { Arrow } from '../components/Arrow'\nimport { Progress } from '../components/Progress'\nimport { findContent, getStreamUrl, getEpisodes } from '../lib/lookMovie'\nimport { useMovie } from '../hooks/useMovie';\nimport { TypeSelector } from '../components/TypeSelector'\n\nimport './Search.css'\n\nexport function SearchView() {\n    const { navigate, setStreamUrl, setStreamData } = useMovie();\n\n    const maxSteps = 4;\n    const [options, setOptions] = React.useState([]);\n    const [progress, setProgress] = React.useState(0);\n    const [text, setText] = React.useState(\"\");\n    const [failed, setFailed] = React.useState(false);\n    const [showingOptions, setShowingOptions] = React.useState(false);\n    const [offlineStatus, setOfflineStatus] = React.useState(false);\n    const [type, setType] = React.useState(\"movie\");\n\n    const fail = (str) => {\n        setProgress(maxSteps);\n        setText(str)\n        setFailed(true)\n    }\n\n    async function getStream(title, slug, type) {\n        setStreamUrl(\"\");\n\n        try {\n            setProgress(2);\n            setText(`Getting stream for \"${title}\"`)\n\n            let seasons = [];\n            let episodes = [];\n            if (type === \"show\") {\n                const episodeData = await getEpisodes(slug);\n                episodeData.forEach((e) => {\n                    if (!seasons.includes(e.season))\n                        seasons.push(e.season);\n                    \n                    if (!episodes[e.season])\n                        episodes[e.season] = []\n                    episodes[e.season].push(e.episode)\n                    \n                })\n            }\n\n            let realUrl = '';\n            if (type === \"movie\") {\n                const { url } = await getStreamUrl(slug, type);\n    \n                if (url === '') {\n                    return fail(`Not found: ${title}`)\n                }\n                realUrl = url;\n            }\n\n            setProgress(maxSteps);\n            setStreamUrl(realUrl);\n            setStreamData({\n                title,\n                type,\n                seasons,\n                episodes,\n                slug\n            })\n            setText(`Streaming...`)\n            navigate(\"movie\")\n        } catch (err) {\n            fail(\"Failed to get stream\")\n        }\n    }\n\n    async function searchMovie(query, contentType) {\n        setFailed(false);\n        setText(`Searching for ${contentType} \"${query}\"`);\n        setProgress(1)\n        setShowingOptions(false)\n\n        try {\n            const { options } = await findContent(query, contentType)\n\n            if (options.length === 0) {\n                return fail(`Could not find that ${contentType}`)\n            } else if (options.length > 1) {\n                setProgress(2);\n                setText(`Choose your ${contentType}`);\n                setOptions(options);\n                setShowingOptions(true);\n                return;\n            }\n\n            const { title, slug, type } = options[0];\n            getStream(title, slug, type);\n        } catch (err) {\n            fail(`Failed to watch ${contentType}`)\n        }\n    }\n\n    React.useEffect(() => {\n        async function fetchHealth() {\n            const HOME_URL = \"https://hidden-inlet-27205.herokuapp.com/https://lookmovie.io/\"\n            await fetch(HOME_URL).catch(() => {\n                // Request failed; source likely offline\n                setOfflineStatus(`Our content provider is currently offline, apologies.`)\n            })\n        }\n        fetchHealth()\n    }, [])\n\n    return (\n        <div className=\"cardView\">\n            <Card>\n                {offlineStatus ? <ErrorBanner>{offlineStatus}</ErrorBanner> : ''}\n                <Title accent=\"Because watching content legally is boring\">\n                    What do you wanna watch?\n                </Title>\n                <TypeSelector\n                    setType={(type) => setType(type)}\n                    choices={[\n                        { label: \"Movie\", value: \"movie\" },\n                        { label: \"TV Show\", value: \"show\" }\n                    ]}\n                    noWrap={true}\n                    selected={type}\n                />\n                <InputBox placeholder={ type === \"movie\" ? \"Hamilton\" : \"Atypical\" } onSubmit={(str) => searchMovie(str, type)} />\n                <Progress show={progress > 0} failed={failed} progress={progress} steps={maxSteps} text={text} />\n            </Card>\n\n            <Card show={showingOptions} doTransition>\n                <Title size=\"medium\">\n                    Whoops, there are a few {type}s like that\n                </Title>\n                {options?.map((v, i) => (\n                    <MovieRow key={i} title={v.title} slug={v.slug} type={v.type} year={v.year} season={v.season} episode={v.episode} onClick={() => {\n                        setShowingOptions(false)\n                        getStream(v.title, v.slug, v.type, v.season, v.episode)\n                    }}/>\n                ))}\n            </Card>\n            <div className=\"topRightCredits\">\n                <a href=\"https://github.com/JamesHawkinss/movie-web\" target=\"_blank\" rel=\"noreferrer\">Check it out on GitHub <Arrow/></a>\n            </div>\n        </div>\n    )\n}\n","import React from 'react'\nimport { Title } from '../components/Title'\nimport { Card } from '../components/Card'\n\nexport function NotFound(props) {\n    return (\n        <div className=\"cardView\">\n            <Card>\n                <Title accent=\"How did you end up here?\">\n                    Oopsie doopsie\n                </Title>\n            </Card>\n        </div>\n    )\n}\n","import React from 'react'\nimport './VideoPlaceholder.css'\n\nexport function VideoPlaceholder(props) {\n\treturn (\n\t\t<div className=\"videoPlaceholder\">\n\t\t\t<div className=\"videoPlaceholderBox\">\n\t\t\t\t<p>{props.children}</p>\n\t\t\t</div>\n\t\t</div>\n\t)\n}","import React from 'react'\nimport Hls from 'hls.js'\nimport './VideoElement.css'\nimport { VideoPlaceholder } from './VideoPlaceholder'\n\n// streamUrl: string\n// loading: boolean\nexport function VideoElement({ streamUrl, loading, setProgress }) {\n    const videoRef = React.useRef(null);\n    const [error, setError] = React.useState(false);\n\n    React.useEffect(() => {\n        setError(false)\n        if (!videoRef || !videoRef.current || !streamUrl || streamUrl.length === 0 || loading) return;\n        \n        const hls = new Hls();\n        \n        if (!Hls.isSupported() && videoRef.current.canPlayType('application/vnd.apple.mpegurl')) {\n            videoRef.current.src = streamUrl;\n            return;\n        } else if (!Hls.isSupported()) {\n            setError(true)\n            return;\n        }\n        \n        hls.attachMedia(videoRef.current);\n        hls.loadSource(streamUrl);\n    }, [videoRef, streamUrl, loading])\n\n    if (error)\n        return (<VideoPlaceholder>Your browser is not supported</VideoPlaceholder>)\n\n    if (loading)\n        return <VideoPlaceholder>Loading episode...</VideoPlaceholder>\n    \n    if (!streamUrl || streamUrl.length === 0)\n        return <VideoPlaceholder>No video selected</VideoPlaceholder>\n\n    return (\n        <video className=\"videoElement\" ref={videoRef} controls autoPlay onProgress={setProgress} />\n    )\n}\n","import React from 'react';\n// import { Arrow } from './Arrow';\nimport './NumberSelector.css'\nimport { PercentageOverlay } from './PercentageOverlay';\n\n// setType: (txt: string) => void\n// choices: { label: string, value: string }[]\n// selected: string\nexport function NumberSelector({ setType, choices, selected }) {\n    return (\n        <div className=\"numberSelector\">\n            {choices.map(v=>(\n                <div key={v.value} className=\"choiceWrapper\">\n                    <div className={`choice ${selected&&selected===v.value?'selected':''}`} onClick={() => setType(v.value)}>\n                        {v.label}\n                        <PercentageOverlay percentage={v.percentage} />\n                    </div>\n                </div>\n            ))}\n        </div>\n    )\n}\n","import React from 'react';\nimport { TypeSelector } from './TypeSelector';\nimport { NumberSelector } from './NumberSelector';\nimport './EpisodeSelector.css'\n\nexport function EpisodeSelector({ setSeason, setEpisode, seasons, season, episodes, currentSeason, currentEpisode, slug }) {\n\n    const choices = episodes.map(v => {\n\n        let progressData = JSON.parse(localStorage.getItem('video-progress') || \"{}\")\n        \n        let currentlyAt = 0;\n        let totalDuration = 0;\n\n        const progress = progressData?.lookmovie?.show?.slug?.[`${season}-${v}`]\n        if(progress) {\n            currentlyAt = progress.currentlyAt\n            totalDuration = progress.totalDuration\n        }\n\n        const percentage = Math.round((currentlyAt / totalDuration) * 100)\n\n        return { \n            value: v.toString(), \n            label: v,\n            percentage\n        }\n    })\n\n    return (\n        <div className=\"episodeSelector\">\n            <TypeSelector setType={setSeason} choices={seasons.map(v=>({ value: v.toString(), label: `Season ${v}`}))} selected={currentSeason}/><br></br>\n            <NumberSelector setType={(e) => setEpisode({episode: e, season: currentSeason})} choices={choices} selected={currentEpisode.season === currentSeason?currentEpisode.episode:null}/>\n        </div>\n    )\n}\n","import React from 'react'\nimport { Title } from '../components/Title'\nimport { Card } from '../components/Card'\nimport { useMovie } from '../hooks/useMovie'\nimport { VideoElement } from '../components/VideoElement'\nimport { EpisodeSelector } from '../components/EpisodeSelector'\nimport './Movie.css'\nimport { getStreamUrl } from '../lib/lookMovie'\n\nexport function MovieView(props) {\n    const { streamUrl, streamData, setStreamUrl } = useMovie();\n    const [season, setSeason] = React.useState(\"1\");\n    const [seasonList, setSeasonList] = React.useState([]);\n    const [episodeLists, setEpisodeList] = React.useState([]);\n    const [episode, setEpisode] = React.useState({ episode: null, season: null });\n    const [loading, setLoading] = React.useState(false);\n\n    React.useEffect(() => {\n        setEpisodeList(streamData.episodes[season]);\n    }, [season, streamData.episodes])\n\n    React.useEffect(() => {\n        if (streamData.type === \"show\") {\n            setSeasonList(streamData.seasons);\n            setSeason(streamData.seasons[0])\n            // TODO load from localstorage last watched\n            setEpisode({ episode: streamData.episodes[streamData.seasons[0]][0], season: streamData.seasons[0] })\n            setEpisodeList(streamData.episodes[streamData.seasons[0]]);\n        }\n    }, [streamData])\n\n    React.useEffect(() => {\n        let cancel = false;\n        // ignore if not a show\n        if (streamData.type !== \"show\") return () => {\n            cancel = true;\n        };\n        if (!episode.episode) {\n            setLoading(false);\n            setStreamUrl('');\n            return;\n        }\n        setLoading(true);\n\n        getStreamUrl(streamData.slug, streamData.type, episode.season, episode.episode)\n            .then(({url}) => {\n                if (cancel) return;\n                setStreamUrl(url)\n                setLoading(false);\n            })\n            .catch(e => {\n                if (cancel) return;\n                console.error(e)\n            })\n        return () => {\n            cancel = true;\n        } \n    }, [episode, streamData, setStreamUrl])\n\n    const setProgress = (evt) => {\n        let ls = JSON.parse(localStorage.getItem(\"video-progress\") || \"{}\")\n\n        // We're just checking lookmovie for now since there is only one scraper\n        if(!ls.lookmovie) ls.lookmovie = {}\n        if(!ls.lookmovie[streamData.type]) ls.lookmovie[streamData.type] = {}\n        if(!ls.lookmovie[streamData.type][streamData.slug]) {\n            ls.lookmovie[streamData.type][streamData.slug] = {}\n        }\n        \n        // Store real data\n        let key = streamData.type === \"show\" ? `${season}-${episode.episode}` : \"full\"\n        ls.lookmovie[streamData.type][streamData.slug][key] = {\n            currentlyAt: Math.floor(evt.currentTarget.currentTime),\n            totalDuration: Math.floor(evt.currentTarget.duration),\n            updatedAt: Date.now()\n        }\n\n        if(streamData.type === \"show\") {\n            ls.lookmovie[streamData.type][streamData.slug][key].show = {\n                season,\n                episode: episode.episode\n            }\n        }\n\n        localStorage.setItem(\"video-progress\", JSON.stringify(ls))\n    }\n\n    return (\n        <div className={`cardView showType-${streamData.type}`}>\n            <Card fullWidth>\n                <Title accent=\"Return to home\" accentLink=\"search\">\n                    {streamData.title}\n                </Title>\n                {streamData.type === \"show\" ? <Title size=\"small\">\n                    Season {episode.season}: Episode {episode.episode}\n                </Title> : undefined}\n                <VideoElement streamUrl={streamUrl} loading={loading} setProgress={setProgress} />\n                {streamData.type === \"show\" ? \n                    <EpisodeSelector\n                        setSeason={setSeason}\n                        setEpisode={setEpisode}\n                        season={season}\n                        seasons={seasonList}\n                        episodes={episodeLists}\n                        slug={streamData.slug}\n                        currentSeason={season}\n                        currentEpisode={episode}\n                    />\n                : ''}\n            </Card>\n        </div>\n    )\n}\n","import './index.css';\nimport { SearchView } from './views/Search';\nimport { NotFound } from './views/NotFound';\nimport { MovieView } from './views/Movie';\nimport { useMovie, MovieProvider} from './hooks/useMovie';\n\nfunction Router() {\n  const { page } = useMovie();\n\n  if (page === \"search\") {\n    return <SearchView/>\n  }\n\n  if (page === \"movie\") {\n    return <MovieView/>\n  }\n\n  return (\n    <NotFound/>\n  )\n}\n\nfunction App() {\n  return (\n    <MovieProvider>\n      <Router/>\n    </MovieProvider>\n  );\n}\n\nexport default App;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n"],"sourceRoot":""}