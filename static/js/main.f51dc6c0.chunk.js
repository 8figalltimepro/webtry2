(this["webpackJsonpmovie-web"]=this["webpackJsonpmovie-web"]||[]).push([[0],{23:function(e,t,n){},39:function(e,t,n){},41:function(e,t,n){},42:function(e,t,n){},43:function(e,t,n){},44:function(e,t,n){},45:function(e,t,n){},46:function(e,t,n){},47:function(e,t,n){},50:function(e,t,n){},51:function(e,t,n){},52:function(e,t,n){},53:function(e,t,n){},54:function(e,t,n){},55:function(e,t,n){},56:function(e,t,n){},57:function(e,t,n){"use strict";n.r(t);var r=n(1),a=n.n(r),c=n(26),s=n.n(c),o=n(13),i=(n(23),n(8)),u=n(27),l=n(10),p=n(2),d=n.n(p),h=n(6),f=n(4),j=n(16),v=n(5),b=(n(39),n(0));function m(e){return Object(b.jsx)("span",{className:"arrow",dangerouslySetInnerHTML:{__html:'\n            <svg xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather '.concat(e.left?"left":"",'"}>\n                <line x1="5" y1="12" x2="19" y2="12"></line>\n                <polyline points="12 5 19 12 12 19"></polyline>\n            </svg>\n        ')}})}n(41);function x(e){var t=a.a.useState(!1),n=Object(f.a)(t,2),r=n[0],c=n[1],s=a.a.useRef(null),o=a.a.useState(0),i=Object(f.a)(o,2),u=i[0],l=i[1];return a.a.useEffect((function(){(null===s||void 0===s?void 0:s.current)&&(c(e.show),l(s.current.clientHeight))}),[e.show,s]),Object(b.jsx)("div",{className:"card-wrapper ".concat(e.fullWidth?"full":""),style:{height:e.doTransition?r?u:0:"initial"},children:Object(b.jsx)("div",{className:"card ".concat(r?"show":""," ").concat(e.doTransition?"doTransition":""),ref:s,children:e.children})})}n(42);function g(e){var t=e.children;return Object(b.jsx)("div",{className:"errorBanner",children:t})}n(43);function O(e){var t=e.onSubmit,n=e.placeholder,r=a.a.useState(""),c=Object(f.a)(r,2),s=c[0],o=c[1];return Object(b.jsxs)("form",{className:"inputBar",onSubmit:function(e){return e.preventDefault(),t(s),!1},children:[Object(b.jsx)("input",{type:"text",className:"inputTextBox",id:"inputTextBox",placeholder:n,value:s,onChange:function(e){return o(e.target.value)},required:!0}),Object(b.jsx)("button",{className:"inputSearchButton",children:Object(b.jsxs)("span",{className:"text",children:["Search",Object(b.jsx)("span",{className:"arrow",children:Object(b.jsx)(m,{})})]})})]})}n(44);function y(e){var t=e.percentage;return t&&t>3&&(t=Math.max(20,t<90?t:100)),t>0?Object(b.jsx)("div",{className:"progressBar",children:Object(b.jsx)("div",{className:"progressBarInner",style:{width:"".concat(t,"%")}})}):Object(b.jsx)(a.a.Fragment,{})}n(45);function w(e){var t,n,r,a,c=JSON.parse(localStorage.getItem("video-progress")||"{}"),s=null;"movie"===e.type&&((t=null===c||void 0===c||null===(n=c[e.source])||void 0===n||null===(r=n.movie)||void 0===r||null===(a=r[e.slug])||void 0===a?void 0:a.full)&&(s=Math.floor(t.currentlyAt/t.totalDuration*100)));return Object(b.jsxs)("div",{className:"movieRow",onClick:function(){return e.onClick&&e.onClick()},children:[Object(b.jsxs)("div",{className:"left",children:[e.title,Object(b.jsx)("span",{className:"seasonEpisodeSubtitle",children:e.place?" - S".concat(e.place.season,":E").concat(e.place.episode):""}),"\xa0",Object(b.jsxs)("span",{className:"year",children:["(",e.year,")"]})]}),Object(b.jsxs)("div",{className:"watch",children:[Object(b.jsxs)("p",{children:["Watch ",e.type]}),Object(b.jsx)(m,{})]}),Object(b.jsx)(y,{percentage:e.percentage||s})]})}n(46);function S(e){return Object(b.jsxs)("div",{className:"progress ".concat(e.show?"":"hide"," ").concat(e.failed?"failed":""),children:[e.text&&e.text.length>0?Object(b.jsx)("p",{children:e.text}):null,Object(b.jsx)("div",{className:"bar",children:Object(b.jsx)("div",{className:"bar-inner",style:{width:(e.progress/e.steps*100).toFixed(0)+"%"}})})]})}var k=a.a.createContext(null);function N(e){var t=a.a.useState("search"),n=Object(f.a)(t,2),r=n[0],c=n[1],s=a.a.useState(""),o=Object(f.a)(s,2),u=o[0],l=o[1],p=a.a.useState(null),d=Object(f.a)(p,2),h=d[0],j=d[1];return Object(b.jsx)(k.Provider,{value:{navigate:function(e){c(e)},page:r,setStreamUrl:l,streamUrl:u,streamData:h,setStreamData:function(e){j((function(t){return Object(i.a)(Object(i.a)({},t),e)}))},resetStreamData:function(){j(null)}},children:e.children})}function E(e){return a.a.useContext(k)}n(47);function T(e){var t=E(),n=t.streamData,r=t.resetStreamData,a=Object(v.e)(),c=e.size||"big",s=e.accentLink||"",o=e.accent||"";return Object(b.jsxs)("div",{children:[o.length>0?Object(b.jsxs)("p",{onClick:function(){s.length>0&&(a.push("/".concat(n.type)),r())},className:"title-accent ".concat(s.length>0?"title-accent-link":""),children:[s.length>0?Object(b.jsx)(m,{left:!0}):null,o]}):null,Object(b.jsx)("h1",{className:"title "+(c?"title-size-".concat(c):""),children:e.children})]})}n(50);function C(e){var t=e.setType,n=e.choices,r=e.selected,a=e.noWrap,c=void 0!==a&&a,s=n.findIndex((function(e){return e.value===r})),o={opacity:-1!==s?1:0,transform:"translateX(".concat(-1!==s?7*s:0,"rem)")};return Object(b.jsxs)("div",{className:"typeSelector ".concat(c?"nowrap":""),children:[n.map((function(e){return Object(b.jsx)("div",{className:"choice ".concat(r===e.value?"selected":""),onClick:function(){return t(e.value)},children:e.label},e.value)})),Object(b.jsx)("div",{className:"selectedBar",style:o})]})}var D=n(31),I=n(21),M=n.n(I),P="".concat("https://movie-web-proxy.herokuapp.com","/https://lookmovie.com");function B(){return(B=Object(h.a)(d.a.mark((function e(t,n){var r,a,c,s,o,i,u,l,p,h,f,j,v,b;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r="".concat(P,"/").concat(n,"s/search/?q=").concat(encodeURIComponent(t)),e.next=3,fetch(r).then((function(e){return e.text()}));case 3:if(a=e.sent,c=new DOMParser,s=c.parseFromString(a,"text/html"),o=Array.from(s.querySelectorAll(".movie-item-style-1")),i=o.map((function(e){return{type:n,title:e.querySelector("h6 a").innerText.trim(),year:e.querySelector(".year").innerText.trim(),slug:e.querySelector("a").href.split("/").pop()}})),u=new D.a(i,{threshold:.3,distance:200,keys:["title"]}),0!==(l=u.search(t.toString()).map((function(e){return e.item}))).length){e.next=12;break}return e.abrupt("return",{options:[]});case 12:if(!(l.length>1)){e.next=18;break}return p={options:[]},l.forEach((function(e){return p.options.push({title:e.title,slug:e.slug,type:e.type,year:e.year,source:"lookmovie"})})),e.abrupt("return",p);case 18:return h=l[0],f=h.title,j=h.slug,v=h.type,b=h.year,e.abrupt("return",{options:[{title:f,slug:j,type:v,year:b,source:"lookmovie"}]});case 20:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function U(e){return q.apply(this,arguments)}function q(){return(q=Object(h.a)(d.a.mark((function e(t){var n,r,a,c,s,o,i,u;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,A(t);case 2:return n=e.sent,r=Math.floor(Date.now()/1e3),a="","movie"===t.type?a="".concat(P,"/manifests/movies/json/").concat(t.id,"/").concat(r,"/").concat(n,"/master.m3u8"):"show"===t.type&&(a="".concat(P,"/manifests/shows/json/").concat(n,"/").concat(r,"/").concat(t.id,"/master.m3u8")),e.next=8,fetch(a).then((function(e){return e.json()}));case 8:for(c=e.sent,s="",o=0,i=["1080p","1080","720p","720","480p","480","auto"];o<i.length;o++)!c[u=i[o]]||c[u].includes("dummy")||c[u].includes("earth-1984")||s||(s=c[u]);return e.abrupt("return",s.startsWith("/")?"".concat(P).concat(s):s);case 13:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function A(e){return F.apply(this,arguments)}function F(){return(F=Object(h.a)(d.a.mark((function e(t){var n,r,a,c;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r="","movie"===t.type?r="".concat(P,"/api/v1/security/movie-access?id_movie=").concat(t.id,"&token=1&sk=&step=1"):"show"===t.type&&(r="".concat(P,"/api/v1/security/show-access?slug=").concat(t.slug,"&token=&step=2")),e.next=4,fetch(r).then((function(e){return e.json()}));case 4:if(a=e.sent,!(c=null===a||void 0===a||null===(n=a.data)||void 0===n?void 0:n.accessToken)){e.next=8;break}return e.abrupt("return",c);case 8:return e.abrupt("return","Invalid type provided in config");case 9:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function W(){return(W=Object(h.a)(d.a.mark((function e(t){var n,r,a,c,s;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n="".concat(P,"/shows/view/").concat(t),e.next=3,fetch(n).then((function(e){return e.text()}));case 3:return r=e.sent,a=M.a.parse("{"+r.slice(r.indexOf("show_storage")).split("};")[0].split("= {")[1].trim()+"}"),c=[],s=[],a.seasons.forEach((function(e){c.includes(e.season)||c.push(e.season),s[e.season]||(s[e.season]=[]),s[e.season].push(e.episode)})),e.abrupt("return",{seasons:c,episodes:s});case 9:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function _(){return(_=Object(h.a)(d.a.mark((function e(t,n,r,a){var c,s,o,i,u,l;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c="".concat(P,"/").concat(n,"s/view/").concat(t),e.next=3,fetch(c).then((function(e){return e.text()}));case 3:if(s=e.sent,o=M.a.parse("{"+s.slice(s.indexOf("".concat(n,"_storage"))).split("};")[0].split("= {")[1].trim()+"}"),i="","movie"===n?i=o.id_movie:"show"===n&&(u=o.seasons.find((function(e){return e.season===r&&e.episode===a})))&&(i=u.id_episode),""!==i){e.next=9;break}return e.abrupt("return",{url:""});case 9:return e.next=11,U({slug:t,id:i,type:n});case 11:return l=e.sent,e.abrupt("return",{url:l});case 13:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var J={findContent:function(e,t){return B.apply(this,arguments)},getStreamUrl:function(e,t,n,r){return _.apply(this,arguments)},getEpisodes:function(e){return W.apply(this,arguments)}},R={62:"0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ",95:"!\"#$%&'()*+,-./0123456789:;<=>?@ABCDEFGHIJKLMNOPQRSTUVWXYZ[\\]^_`abcdefghijklmnopqrstuvwxyz{|}~"};function L(e){var t=function(e){for(var t=[/}\('([\s\S]*)', *(\d+), *(\d+), *'([\s\S]*)'\.split\('\|'\), *(\d+), *([\s\S]*)\)\)/,/}\('([\s\S]*)', *(\d+), *(\d+), *'([\s\S]*)'\.split\('\|'\)/],n=0;n<t.length;++n){var r;if(r=t[n].exec(e))return[r[1],r[4].split("|"),parseInt(r[2]),parseInt(r[3])]}throw new Error("Could not make sense of p.a.c.k.e.r data (unexpected code structure)")}(e),n=t[0],r=t[1],a=t[2],c=t[3];if(c!==r.length)throw new Error("Malformed p.a.c.k.e.r. symtab. ("+c+" != "+r.length+")");var s=function(e){if(2<=e<=36)return function(t){return parseInt(t,e)};var t={},n=R[e];if(!n)throw new Error("Unsupported encoding");for(;0<n.length;++n)t[n[0]]=0;return function(n){return n.split("").reverse().reduce((function(n,r){return Math.pow(e,r)*t[n]}))}}(a);return n.replace(/\b\w+\b/g,(function(e){return r[s(e)]||e}))}var V="https://movie-web-proxy.herokuapp.com/",H="".concat(V,"https://gomo.to"),z="".concat(H,"/movie"),G="".concat(H,"/decoding_v3.php");function X(){return(X=Object(h.a)(d.a.mark((function e(t,n){var r,a,c;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,"movie"===n){e.next=3;break}return e.abrupt("return");case 3:return r=t.toLowerCase(),e.next=6,fetch("".concat(V,"https://v2.sg.media-imdb.com/suggestion/").concat(r.slice(0,1),"/").concat(r,".json")).then((function(e){return e.json()}));case 6:if(a=e.sent,c=[],a.d.forEach((function(e){e.id.startsWith("tt")&&"TV series"!==e.q&&"TV mini-series"!==e.q&&"video game"!==e.q&&"TV movie"!==e.q&&"TV special"!==e.q&&c.push({title:e.l,slug:e.id,type:"movie",year:e.y,source:"gomostream"})})),!(c.length>1)){e.next=13;break}return e.abrupt("return",{options:c});case 13:return e.abrupt("return",{options:[c[0]]});case 14:e.next=20;break;case 16:throw e.prev=16,e.t0=e.catch(0),console.error(e.t0),new Error(e.t0);case 20:case"end":return e.stop()}}),e,null,[[0,16]])})))).apply(this,arguments)}function Y(){return(Y=Object(h.a)(d.a.mark((function e(t,n,r,a){var c,s,o,i,u,l,p,h,f,j,v,b,m,x,g;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("movie"===n){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,fetch("".concat(z,"/").concat(t)).then((function(e){return e.text()}));case 4:if("Movie not available."!==(o=e.sent)){e.next=7;break}return e.abrupt("return",{url:""});case 7:return i=null===(c=o.match(/var tc = '(.+)';/))||void 0===c?void 0:c[1],u=null===(s=o.match(/"_token": "(.+)",/))||void 0===s?void 0:s[1],(l=new FormData).append("tokenCode",i),l.append("_token",u),e.next=14,fetch(G,{method:"POST",body:l,headers:{"x-token":i.slice(5,13).split("").reverse().join("")+"13574199"}}).then((function(e){return e.json()}));case 14:return p=e.sent,h=p.find((function(e){return e.includes("gomo.to")})),e.next=18,fetch("".concat(V).concat(h)).then((function(e){return e.text()}));case 18:if(f=e.sent,j=new DOMParser,"File was deleted"!==(v=j.parseFromString(f,"text/html")).body.innerText){e.next=23;break}return e.abrupt("return",{url:""});case 23:return b=v.querySelectorAll("script")[8].innerHTML,(m=L(b).split("")).splice(0,43),x=m.findIndex((function(e){return'"'===e})),g=m.slice(0,x).join(""),e.abrupt("return",{url:g});case 29:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var K={findContent:function(e,t){return X.apply(this,arguments)},getStreamUrl:function(e,t,n,r){return Y.apply(this,arguments)}};function Q(e,t){return Z.apply(this,arguments)}function Z(){return(Z=Object(h.a)(d.a.mark((function e(t,n){var r;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r={options:[]},e.next=3,Promise.all([J.findContent(t,n),K.findContent(t,n)]);case 3:return e.sent.forEach((function(e){e&&e.options&&e.options.forEach((function(e){e&&r.options.push(e)}))})),e.abrupt("return",r);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function $(e,t,n,r,a){return ee.apply(this,arguments)}function ee(){return(ee=Object(h.a)(d.a.mark((function e(t,n,r,a,c){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:e.t0=r,e.next="lookmovie"===e.t0?3:"gomostream"===e.t0?6:9;break;case 3:return e.next=5,J.getStreamUrl(t,n,a,c);case 5:return e.abrupt("return",e.sent);case 6:return e.next=8,K.getStreamUrl(t,n,a,c);case 8:return e.abrupt("return",e.sent);case 9:return e.abrupt("return");case 10:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function te(e,t){return ne.apply(this,arguments)}function ne(){return(ne=Object(h.a)(d.a.mark((function e(t,n){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:e.t0=n,e.next="lookmovie"===e.t0?3:(e.t0,6);break;case 3:return e.next=5,J.getEpisodes(t);case 5:return e.abrupt("return",e.sent);case 6:return e.abrupt("return");case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}n(51);function re(){var e,t=E(),n=t.navigate,r=t.setStreamUrl,c=t.setStreamData,s=Object(v.e)(),o=Object(v.f)("/:type"),p=null===o||void 0===o||null===(e=o.params)||void 0===e?void 0:e.type,y=Object(v.f)("/:type/:source/:title/:slug"),k=a.a.useState([]),N=Object(f.a)(k,2),D=N[0],I=N[1],M=a.a.useState(0),P=Object(f.a)(M,2),B=P[0],U=P[1],q=a.a.useState(""),A=Object(f.a)(q,2),F=A[0],W=A[1],_=a.a.useState(!1),J=Object(f.a)(_,2),R=J[0],L=J[1],V=a.a.useState(!1),H=Object(f.a)(V,2),z=H[0],G=H[1],X=a.a.useState(!1),Y=Object(f.a)(X,2),K=Y[0],Z=Y[1],ee=a.a.useState("search"),ne=Object(f.a)(ee,2),re=ne[0],ae=ne[1],ce=a.a.useState([]),se=Object(f.a)(ce,2),oe=se[0],ie=se[1],ue=function(e){U(4),W(e),L(!0)};function le(e,t,n,r,a){return pe.apply(this,arguments)}function pe(){return(pe=Object(h.a)(d.a.mark((function e(t,a,s,o,i){var u,l,p,h,f,j;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r(""),e.prev=1,U(2),W('Getting stream for "'.concat(t,'"')),u=[],l=[],"show"!==s){e.next=12;break}return e.next=9,te(a,o);case 9:p=e.sent,u=p.seasons,l=p.episodes;case 12:if(h="","movie"!==s){e.next=21;break}return e.next=16,$(a,s,o);case 16:if(f=e.sent,""!==(j=f.url)){e.next=20;break}return e.abrupt("return",ue("Not found: ".concat(t)));case 20:h=j;case 21:U(4),r(h),c({title:t,type:s,seasons:u,episodes:l,slug:a,source:o,year:i}),W("Streaming..."),n("movie"),e.next=32;break;case 28:e.prev=28,e.t0=e.catch(1),console.error(e.t0),ue("Failed to get stream");case 32:case"end":return e.stop()}}),e,null,[[1,28]])})))).apply(this,arguments)}function de(){return(de=Object(h.a)(d.a.mark((function e(t,n){var r,a,c,i,u,l,p,h;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return L(!1),W("Searching for ".concat(n,' "').concat(t,'"')),U(1),G(!1),e.prev=4,e.next=7,Q(t,n);case 7:if(r=e.sent,0!==(a=r.options).length){e.next=13;break}return e.abrupt("return",ue("Could not find that ".concat(n)));case 13:if(!(a.length>1)){e.next=19;break}return U(2),W("Choose your ".concat(n)),I(a),G(!0),e.abrupt("return");case 19:c=a[0],i=c.title,u=c.slug,l=c.type,p=c.source,h=c.year,s.push("".concat(o.url,"/").concat(p,"/").concat(i,"/").concat(u)),le(i,u,l,p,h),e.next=28;break;case 24:e.prev=24,e.t0=e.catch(4),console.error(e.t0),ue("Failed to watch ".concat(n));case 28:case"end":return e.stop()}}),e,null,[[4,24]])})))).apply(this,arguments)}return a.a.useEffect((function(){function e(){return(e=Object(h.a)(d.a.mark((function e(){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return"https://movie-web-proxy.herokuapp.com",e.next=3,fetch("https://movie-web-proxy.herokuapp.com").catch((function(){Z("Our content provider is currently offline, apologies.")}));case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}!function(){e.apply(this,arguments)}()}),[]),a.a.useEffect((function(){if(y){if("movie"!==(null===y||void 0===y?void 0:y.params.type)&&"show"!==y.params.type)return Z("Failed to find movie. Please try searching below.");le(y.params.title,y.params.slug,y.params.type,y.params.source)}}),[]),a.a.useEffect((function(){var e=JSON.parse(localStorage.getItem("video-progress")||"{}"),t=[];Object.keys(e).forEach((function(n){var r,a,c,s,o,p=[].concat(Object(l.a)(Object.entries(null!==(r=null===(a=e[n])||void 0===a?void 0:a.show)&&void 0!==r?r:{})),Object(l.a)(Object.entries(null!==(c=null===(s=e[n])||void 0===s?void 0:s.movie)&&void 0!==c?c:{}))),d=Object(u.a)(p);try{for(d.s();!(o=d.n()).done;)for(var h=Object(f.a)(o.value,2),j=h[0],v=h[1],b=0,m=Object.values(v);b<m.length;b++){var x=m[b],g={slug:j,data:x,type:x.show?"show":"movie",percentageDone:Math.floor(x.currentlyAt/x.totalDuration*100),source:n};if(x.meta)if(g.percentageDone<90)t.push(g);else{var O,y,w;if(!x.show)continue;var S={};if(x.meta.episodes[x.show.season].includes("".concat(parseInt(x.show.episode)+1)))S.season=x.show.season,S.episode="".concat(parseInt(x.show.episode)+1),g.percentageDone=0;else{if(!x.meta.episodes["".concat(parseInt(x.show.season)+1)][0])continue;S.season="".concat(parseInt(x.show.season)+1),S.episode=x.meta.episodes["".concat(parseInt(x.show.season)+1)][0],g.percentageDone=0}if(g.data.show=Object(i.a)({},S),null===e||void 0===e||null===(O=e[n])||void 0===O||null===(y=O.show)||void 0===y||null===(w=y[j])||void 0===w?void 0:w["".concat(g.data.show.season,"-").concat(g.data.show.episode)])continue;t.push(g)}}}catch(k){d.e(k)}finally{d.f()}t=t.sort((function(e,t){return t.data.updatedAt-e.data.updatedAt})),ie(t)}))}),[]),!p||"movie"!==p&&"show"!==p?Object(b.jsx)(v.a,{to:"/movie"}):Object(b.jsxs)("div",{className:"cardView",children:[Object(b.jsx)(j.a,{children:Object(b.jsxs)("title",{children:["movie"===p?"movies":"shows"," | movie-web"]})}),Object(b.jsxs)("nav",{children:[Object(b.jsx)("a",{className:"search"===re?"selected-link":"",onClick:function(){return ae("search")},href:!0,children:"Search"}),oe.length>0?Object(b.jsx)("a",{className:"watching"===re?"selected-link":"",onClick:function(){return ae("watching")},href:!0,children:"Continue watching"}):""]}),"search"===re?Object(b.jsxs)(a.a.Fragment,{children:[Object(b.jsxs)(x,{children:[K?Object(b.jsx)(g,{children:K}):"",Object(b.jsx)(T,{accent:"Because watching content legally is boring",children:"What do you wanna watch?"}),Object(b.jsx)(C,{setType:function(e){return s.push("/".concat(e))},choices:[{label:"Movie",value:"movie"},{label:"TV Show",value:"show"}],noWrap:!0,selected:p}),Object(b.jsx)(O,{placeholder:"movie"===p?"Hamilton":"Atypical",onSubmit:function(e){return function(e,t){return de.apply(this,arguments)}(e,p)}}),Object(b.jsx)(S,{show:B>0,failed:R,progress:B,steps:4,text:F})]}),Object(b.jsxs)(x,{show:z,doTransition:!0,children:[Object(b.jsxs)(T,{size:"medium",children:["Whoops, there are a few ",p,"s like that"]}),Object.entries(D.reduce((function(e,t){return e[t.source]||(e[t.source]=[]),e[t.source].push(t),e}),{})).map((function(e){return Object(b.jsxs)("div",{children:[Object(b.jsx)("p",{className:"source",children:e[0]}),e[1].map((function(e,t){return Object(b.jsx)(w,{title:e.title,slug:e.slug,type:e.type,year:e.year,source:e.source,onClick:function(){s.push("".concat(o.url,"/").concat(e.source,"/").concat(e.title,"/").concat(e.slug)),G(!1),le(e.title,e.slug,e.type,e.source,e.year)}},t)}))]},e[0])}))]})]}):Object(b.jsx)(a.a.Fragment,{}),oe.length>0&&"watching"===re?Object(b.jsxs)(x,{children:[Object(b.jsx)(T,{children:"Continue watching"}),null===oe||void 0===oe?void 0:oe.map((function(e,t){return Object(b.jsx)(w,{title:e.data.meta.title,slug:e.data.meta.slug,type:e.type,year:e.data.meta.year,source:e.source,place:e.data.show,percentage:e.percentageDone,deletable:!0,onClick:function(){"show"===e.type?s.push("".concat(o.url,"/").concat(e.source,"/").concat(e.data.meta.title,"/").concat(e.slug,"/season/").concat(e.data.show.season,"/episode/").concat(e.data.show.episode)):s.push("".concat(o.url,"/").concat(e.source,"/").concat(e.data.meta.title,"/").concat(e.slug)),G(!1),le(e.data.meta.title,e.data.meta.slug,e.type,e.source,e.data.meta.year)}},t)}))]}):Object(b.jsx)(a.a.Fragment,{}),Object(b.jsxs)("div",{className:"topRightCredits",children:[Object(b.jsxs)("a",{href:"https://github.com/JamesHawkinss/movie-web",target:"_blank",rel:"noreferrer",children:["Check it out on GitHub ",Object(b.jsx)(m,{})]}),Object(b.jsx)("br",{}),Object(b.jsxs)("a",{href:"https://discord.gg/vXsRvye8BS",target:"_blank",rel:"noreferrer",children:["Join the Discord ",Object(b.jsx)(m,{})]})]})]})}var ae=n(17),ce=n.n(ae);n(52);function se(e){return Object(b.jsx)("div",{className:"videoPlaceholder",children:Object(b.jsx)("div",{className:"videoPlaceholderBox",children:Object(b.jsx)("p",{children:e.children})})})}n(53);function oe(e){var t=e.streamUrl,n=e.loading,r=e.setProgress,c=e.videoRef,s=e.startTime,o=a.a.useState(!1),i=Object(f.a)(o,2),u=i[0],l=i[1];function p(){s&&(c.current.currentTime=s)}return a.a.useEffect((function(){if(!t.endsWith(".mp4")){if(l(!1),!c||!c.current||!t||0===t.length||n)return;var e=new ce.a;if(!ce.a.isSupported()&&c.current.canPlayType("application/vnd.apple.mpegurl"))return void(c.current.src=t);if(!ce.a.isSupported())return void l(!0);e.attachMedia(c.current),e.loadSource(t)}}),[c,t,n]),u?Object(b.jsx)(se,{children:"Your browser is not supported"}):n?Object(b.jsx)(se,{children:"Loading episode..."}):t&&0!==t.length?t.endsWith(".mp4")?Object(b.jsx)("video",{className:"videoElement",ref:c,controls:!0,autoPlay:!0,onProgress:r,onLoadedData:p,children:Object(b.jsx)("source",{src:t,type:"video/mp4"})}):Object(b.jsx)("video",{className:"videoElement",ref:c,controls:!0,autoPlay:!0,onProgress:r,onLoadedData:p}):Object(b.jsx)(se,{children:"No video selected"})}n(54);function ie(e){var t=e.setType,n=e.choices,r=e.selected;return Object(b.jsx)("div",{className:"numberSelector",children:n.map((function(e){return Object(b.jsx)("div",{className:"choiceWrapper",children:Object(b.jsxs)("div",{className:"choice ".concat(r&&r===e.value?"selected":""),onClick:function(){return t(e.value)},children:[e.label,Object(b.jsx)(y,{percentage:e.percentage})]})},e.value)}))})}n(55);function ue(e){var t=e.setSelectedSeason,n=e.selectedSeason,r=e.setEpisode,a=e.seasons,c=e.episodes,s=e.currentSeason,o=e.currentEpisode,i=e.streamData,u=c?c.map((function(e){var t,r,a,c=JSON.parse(localStorage.getItem("video-progress")||"{}"),s=0,o=0,u=null===c||void 0===c||null===(t=c[i.source])||void 0===t||null===(r=t[i.type])||void 0===r||null===(a=r[i.slug])||void 0===a?void 0:a["".concat(n,"-").concat(e)];u&&(s=u.currentlyAt,o=u.totalDuration);var l=Math.round(s/o*100);return{value:e.toString(),label:e,percentage:l}})):[];return Object(b.jsxs)("div",{className:"episodeSelector",children:[Object(b.jsx)(C,{setType:t,selected:n,choices:a.map((function(e){return{value:e.toString(),label:"Season ".concat(e)}}))}),Object(b.jsx)("br",{}),Object(b.jsx)(ie,{setType:function(e){return r({episode:e,season:n})},choices:u,selected:n.toString()===s?o:null})]})}n(56);function le(e){var t=Object(v.f)("/:type/:source/:title/:slug"),n=Object(v.f)("/:type/:source/:title/:slug/season/:season/episode/:episode"),r=Object(v.e)(),c=E(),s=c.streamUrl,o=c.streamData,i=c.setStreamUrl,u=a.a.useState([]),l=Object(f.a)(u,2),p=l[0],d=l[1],h=a.a.useState([]),m=Object(f.a)(h,2),g=m[0],O=m[1],y=a.a.useState(!1),w=Object(f.a)(y,2),S=w[0],k=w[1],N=a.a.useState("1"),C=Object(f.a)(N,2),D=C[0],I=C[1],M=a.a.useState(0),P=Object(f.a)(M,2),B=P[0],U=P[1],q=a.a.useRef(null),A=a.a.useRef(!1),F=(null===n||void 0===n?void 0:n.params.season)||"1",W=(null===n||void 0===n?void 0:n.params.episode)||"1";a.a.useEffect((function(){"show"!==o.type||n||r.replace("".concat(t.url,"/season/1/episode/1"))}),[o.type,n,r,t.url]),a.a.useEffect((function(){"show"===o.type&&n&&I(n.params.season.toString())}),[]),a.a.useEffect((function(){var e=!1;return"show"!==o.type?function(){e=!0}:W?(k(!0),$(o.slug,o.type,o.source,F,W).then((function(t){var n=t.url;e||(i(n),k(!1))})).catch((function(t){e||console.error(t)})),function(){e=!0}):(k(!1),void i(""))}),[W,o,i,F]),a.a.useEffect((function(){"show"===o.type&&(d(o.seasons),O(o.episodes[D]))}),[o.seasons,o.episodes,o.type,D]),a.a.useEffect((function(){var e,t,n,r,a=JSON.parse(localStorage.getItem("video-progress")||"{}"),c="show"===o.type?"".concat(F,"-").concat(W):"full",s=null===a||void 0===a||null===(e=a[o.source])||void 0===e||null===(t=e[o.type])||void 0===t||null===(n=t[o.slug])||void 0===n||null===(r=n[c])||void 0===r?void 0:r.currentlyAt;U(s)}),[t,n]);return Object(b.jsxs)("div",{className:"cardView showType-".concat(o.type),children:[Object(b.jsx)(j.a,{children:Object(b.jsxs)("title",{children:[o.title,"show"===o.type?" | S".concat(F,"E").concat(W):""," | movie-web"]})}),Object(b.jsxs)(x,{fullWidth:!0,children:[Object(b.jsx)(T,{accent:"Return to home",accentLink:"search",children:o.title}),"show"===o.type?Object(b.jsxs)(T,{size:"small",children:["Season ",F,": Episode ",W]}):void 0,Object(b.jsx)(oe,{streamUrl:s,loading:S,setProgress:function(e){var t=JSON.parse(localStorage.getItem("video-progress")||"{}");t[o.source]||(t[o.source]={}),t[o.source][o.type]||(t[o.source][o.type]={}),t[o.source][o.type][o.slug]||(t[o.source][o.type][o.slug]={});var n="show"===o.type?"".concat(F,"-").concat(W):"full";t[o.source][o.type][o.slug][n]={currentlyAt:Math.floor(e.currentTarget.currentTime),totalDuration:Math.floor(e.currentTarget.duration),updatedAt:Date.now(),meta:o},"show"===o.type&&(t[o.source][o.type][o.slug][n].show={season:F,episode:W}),localStorage.setItem("video-progress",JSON.stringify(t))},videoRef:q,startTime:B}),"show"===o.type?Object(b.jsx)(ue,{setSelectedSeason:I,selectedSeason:D,setEpisode:function(e){var n=e.season,a=e.episode;r.push("".concat(t.url,"/season/").concat(n,"/episode/").concat(a)),A.current=!1},seasons:p,episodes:g,currentSeason:F,currentEpisode:W,streamData:o}):""]})]})}function pe(){return E().streamData?Object(b.jsx)(le,{}):Object(b.jsx)(re,{})}var de=function(){return Object(b.jsx)(N,{children:Object(b.jsx)(pe,{})})};s.a.render(Object(b.jsx)(a.a.StrictMode,{children:Object(b.jsx)(o.a,{children:Object(b.jsx)(de,{})})}),document.getElementById("root"))}},[[57,1,2]]]);
//# sourceMappingURL=main.f51dc6c0.chunk.js.map